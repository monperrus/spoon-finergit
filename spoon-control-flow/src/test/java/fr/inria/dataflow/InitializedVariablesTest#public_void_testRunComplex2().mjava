@Test
public
void
testRunComplex2
(
)
throws
Exception
{
ControlFlowNode
.
count
=
0
;
ControlFlowGraph
graph
=
ForwardFlowBuilderVisitorTest
.
buildGraph
(
this
.
getClass
(
)
.
getResource
(
"/initialized"
)
.
toURI
(
)
.
getPath
(
)
,
"complexFlow1"
,
true
)
;
System
.
out
.
println
(
"Compiled OK"
)
;
InitializedVariables
vars
=
new
InitializedVariables
(
)
;
graph
.
simplify
(
)
;
System
.
out
.
println
(
graph
.
toGraphVisText
(
)
)
;
ControlFlowNode
n
=
ControlFlowBuilder
.
firstNode
(
graph
,
graph
.
findNodeById
(
15
)
.
getStatement
(
)
.
getParent
(
)
)
;
vars
.
run
(
n
)
;
HashSet
<
String
>
names
=
new
HashSet
<
>
(
)
;
for
(
CtVariableReference
v
:
vars
.
getInitialized
(
)
)
names
.
add
(
v
.
getSimpleName
(
)
)
;
assertEquals
(
vars
.
getInitialized
(
)
.
size
(
)
,
5
)
;
assertTrue
(
names
.
contains
(
"pp"
)
)
;
assertTrue
(
names
.
contains
(
"p"
)
)
;
assertTrue
(
names
.
contains
(
"iter"
)
)
;
assertTrue
(
names
.
contains
(
"eps"
)
)
;
}
