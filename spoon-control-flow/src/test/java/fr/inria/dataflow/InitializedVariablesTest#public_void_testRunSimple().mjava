@Test
public
void
testRunSimple
(
)
throws
Exception
{
ControlFlowGraph
graph
=
ForwardFlowBuilderVisitorTest
.
buildGraph
(
this
.
getClass
(
)
.
getResource
(
"/initialized"
)
.
toURI
(
)
.
getPath
(
)
,
"simpleflow"
,
true
)
;
InitializedVariables
vars
=
new
InitializedVariables
(
)
;
graph
.
simplify
(
)
;
ControlFlowNode
n
=
graph
.
findNodesOfKind
(
BranchKind
.
EXIT
)
.
get
(
0
)
;
vars
.
run
(
n
)
;
for
(
CtVariableReference
v
:
vars
.
getInitialized
(
)
)
{
assertFalse
(
v
.
getSimpleName
(
)
.
contains
(
"notInitialized"
)
)
;
}
assertEquals
(
vars
.
getInitialized
(
)
.
size
(
)
,
6
)
;
}
