@Ignore("Known bug")
@Test
public
void
testTwoConsecutiveLoops
(
)
throws
Exception
{
ControlFlowGraph
graph
=
ForwardFlowBuilderVisitorTest
.
buildGraph
(
this
.
getClass
(
)
.
getResource
(
"/initialized"
)
.
toURI
(
)
.
getPath
(
)
,
"twoLoops"
,
true
)
;
graph
.
simplify
(
)
;
InitializedVariables
vars
=
new
InitializedVariables
(
)
;
System
.
out
.
print
(
graph
.
toGraphVisText
(
)
)
;
ControlFlowNode
n
=
ControlFlowBuilder
.
firstNode
(
graph
,
graph
.
branches
(
)
.
get
(
1
)
.
getStatement
(
)
.
getParent
(
)
)
;
vars
.
run
(
n
)
;
HashSet
<
String
>
names
=
new
HashSet
<
>
(
)
;
for
(
CtVariableReference
v
:
vars
.
getInitialized
(
)
)
names
.
add
(
v
.
getSimpleName
(
)
)
;
assertEquals
(
2
,
vars
.
getInitialized
(
)
.
size
(
)
)
;
assertFalse
(
names
.
contains
(
"i"
)
)
;
}
