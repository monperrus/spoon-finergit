@Test
void
testCopy
(
final
FxRobot
robot
)
{
final
VBox
propsPanel
=
robot
.
lookup
(
"#propPanel"
)
.
query
(
)
;
final
CtElement
stub
=
Mockito
.
mock
(
CtElement
.
class
)
;
final
ClipboardContent
clipboardContent
=
new
ClipboardContent
(
)
;
clipboardContent
.
putString
(
""
)
;
Platform
.
runLater
(
(
)
->
Clipboard
.
getSystemClipboard
(
)
.
setContent
(
clipboardContent
)
)
;
WaitForAsyncUtils
.
waitForFxEvents
(
)
;
Platform
.
runLater
(
(
)
->
spoonCodeInstrument
.
updatePropertiesPanel
(
stub
)
)
;
WaitForAsyncUtils
.
waitForFxEvents
(
)
;
robot
.
clickOn
(
(
(
VBox
)
propsPanel
.
getChildren
(
)
.
get
(
0
)
)
.
getChildren
(
)
.
get
(
1
)
)
;
robot
.
press
(
KeyCode
.
CONTROL
)
.
type
(
KeyCode
.
C
)
.
release
(
KeyCode
.
CONTROL
)
;
WaitForAsyncUtils
.
waitForFxEvents
(
)
;
final
AtomicReference
<
Object
>
content
=
new
AtomicReference
<
>
(
)
;
Platform
.
runLater
(
(
)
->
content
.
set
(
Clipboard
.
getSystemClipboard
(
)
.
getContent
(
DataFormat
.
PLAIN_TEXT
)
)
)
;
WaitForAsyncUtils
.
waitForFxEvents
(
)
;
AssertionsForClassTypes
.
assertThat
(
content
.
get
(
)
)
.
isInstanceOf
(
String
.
class
)
;
AssertionsForClassTypes
.
assertThat
(
(
String
)
content
.
get
(
)
)
.
isNotEmpty
(
)
;
}
