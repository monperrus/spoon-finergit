/** 
 * Starts the Spoon processing.
 */
public
void
run
(
)
throws
Exception
{
getFactory
(
)
.
getEnvironment
(
)
.
reportProgressMessage
(
"Spoon version 2.0"
)
;
getFactory
(
)
.
getEnvironment
(
)
.
debugMessage
(
"loading command-line arguments..."
)
;
processArguments
(
)
;
if
(
arguments
.
getBoolean
(
"fragments"
)
)
{
getFactory
(
)
.
getEnvironment
(
)
.
reportProgressMessage
(
"running in 'fragments' mode: AST changes will be ignored"
)
;
}
getFactory
(
)
.
getEnvironment
(
)
.
reportProgressMessage
(
"start processing..."
)
;
long
t
=
System
.
currentTimeMillis
(
)
;
long
tstart
=
t
;
build
(
)
;
getFactory
(
)
.
getEnvironment
(
)
.
debugMessage
(
"model built in "
+
(
System
.
currentTimeMillis
(
)
-
t
)
+
" ms"
)
;
t
=
System
.
currentTimeMillis
(
)
;
process
(
)
;
getFactory
(
)
.
getEnvironment
(
)
.
debugMessage
(
"model processed in "
+
(
System
.
currentTimeMillis
(
)
-
t
)
+
" ms"
)
;
t
=
System
.
currentTimeMillis
(
)
;
print
(
)
;
FileGenerator
<
?
>
fg
=
getFactory
(
)
.
getEnvironment
(
)
.
getDefaultFileGenerator
(
)
;
if
(
fg
!=
null
)
{
{
getFactory
(
)
.
getEnvironment
(
)
.
debugMessage
(
"generated source in "
+
(
System
.
currentTimeMillis
(
)
-
t
)
+
" ms"
)
;
}
getFactory
(
)
.
getEnvironment
(
)
.
debugMessage
(
"output directory: "
+
fg
.
getOutputDirectory
(
)
)
;
}
t
=
System
.
currentTimeMillis
(
)
;
getFactory
(
)
.
getEnvironment
(
)
.
debugMessage
(
"program spooning done in "
+
(
t
-
tstart
)
+
" ms"
)
;
getFactory
(
)
.
getEnvironment
(
)
.
reportEnd
(
)
;
}
