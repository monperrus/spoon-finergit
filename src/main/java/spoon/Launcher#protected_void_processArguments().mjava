protected
void
processArguments
(
)
{
jsapActualArgs
=
getArguments
(
)
;
Environment
environment
=
factory
.
getEnvironment
(
)
;
boolean
debug
=
jsapActualArgs
.
getBoolean
(
"debug"
)
;
environment
.
setComplianceLevel
(
jsapActualArgs
.
getInt
(
"compliance"
)
)
;
environment
.
setVerbose
(
true
)
;
environment
.
setXmlRootFolder
(
jsapActualArgs
.
getFile
(
"properties"
)
)
;
JavaOutputProcessor
printer
=
createOutputWriter
(
jsapActualArgs
.
getFile
(
"output"
)
,
environment
)
;
environment
.
setDefaultFileGenerator
(
printer
)
;
environment
.
setVerbose
(
jsapActualArgs
.
getBoolean
(
"verbose"
)
||
debug
)
;
environment
.
setDebug
(
debug
)
;
environment
.
setAutoImports
(
jsapActualArgs
.
getBoolean
(
"imports"
)
)
;
environment
.
setNoClasspath
(
jsapActualArgs
.
getBoolean
(
"noclasspath"
)
)
;
environment
.
setPreserveLineNumbers
(
jsapActualArgs
.
getBoolean
(
"lines"
)
)
;
environment
.
setTabulationSize
(
jsapActualArgs
.
getInt
(
"tabsize"
)
)
;
environment
.
useTabulations
(
jsapActualArgs
.
getBoolean
(
"tabs"
)
)
;
environment
.
useSourceCodeFragments
(
jsapActualArgs
.
getBoolean
(
"fragments"
)
)
;
environment
.
setCopyResources
(
!
jsapActualArgs
.
getBoolean
(
"no-copy-resources"
)
)
;
environment
.
setGenerateJavadoc
(
jsapActualArgs
.
getBoolean
(
"generate-javadoc"
)
)
;
modelBuilder
=
createCompiler
(
)
;
if
(
getArguments
(
)
.
getString
(
"input"
)
!=
null
)
{
for
(
String
s
:
getArguments
(
)
.
getString
(
"input"
)
.
split
(
"["
+
File
.
pathSeparatorChar
+
"]"
)
)
{
try
{
modelBuilder
.
addInputSource
(
SpoonResourceHelper
.
createResource
(
new
File
(
s
)
)
)
;
}
catch
(
FileNotFoundException
e
)
{
throw
new
SpoonException
(
e
)
;
}
}
}
if
(
getArguments
(
)
.
getString
(
"template"
)
!=
null
)
{
for
(
String
s
:
getArguments
(
)
.
getString
(
"template"
)
.
split
(
"["
+
File
.
pathSeparatorChar
+
"]"
)
)
{
try
{
modelBuilder
.
addTemplateSource
(
SpoonResourceHelper
.
createResource
(
new
File
(
s
)
)
)
;
}
catch
(
FileNotFoundException
e
)
{
environment
.
report
(
null
,
Severity
.
ERROR
,
"Unable to add template file: "
+
e
.
getMessage
(
)
)
;
if
(
environment
.
isDebug
(
)
)
{
logger
.
error
(
e
.
getMessage
(
)
,
e
)
;
}
}
}
}
if
(
getArguments
(
)
.
getString
(
"processors"
)
!=
null
)
{
for
(
String
processorName
:
getArguments
(
)
.
getString
(
"processors"
)
.
split
(
File
.
pathSeparator
)
)
{
addProcessor
(
processorName
)
;
}
}
}
