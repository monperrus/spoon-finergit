private
void
injectMetaClass
(
Class
<
?
>
clas
)
throws
NoSuchFieldException
,
SecurityException
,
IllegalArgumentException
,
IllegalAccessException
{
Field
field
=
clas
.
getField
(
"METACLASS"
)
;
if
(
field
==
null
)
{
return
;
}
System
.
out
.
println
(
"try to inject metaclass in"
+
clas
.
getName
(
)
)
;
CtSimpleType
<
?
>
metaclass
=
factory
.
Type
(
)
.
get
(
clas
)
;
field
.
setAccessible
(
true
)
;
field
.
set
(
null
,
metaclass
)
;
}
