private
<
T
,
K
>
T
getFromCache
(
CtElement
element
,
K
key
,
Supplier
<
T
>
valueResolver
)
{
Map
<
K
,
T
>
cache
=
(
Map
<
K
,
T
>
)
element
.
getMetadata
(
CACHE_KEY
)
;
if
(
cache
==
null
)
{
cache
=
new
HashMap
<
>
(
)
;
element
.
putMetadata
(
CACHE_KEY
,
cache
)
;
}
return
MapUtils
.
getOrCreate
(
cache
,
key
,
valueResolver
)
;
}
