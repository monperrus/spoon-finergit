@Override
public
<
T
>
void
visitCtConstructorCall
(
CtConstructorCall
<
T
>
ctConstructorCall
)
{
enterCtStatement
(
ctConstructorCall
)
;
enterCtExpression
(
ctConstructorCall
)
;
if
(
ctConstructorCall
.
getTarget
(
)
!=
null
)
{
scan
(
ctConstructorCall
.
getTarget
(
)
)
.
write
(
"."
)
;
context
.
ignoreEnclosingClass
=
true
;
}
CtType
<
?
>
topLevelType
=
getTopLevelType
(
ctConstructorCall
)
;
CtTypeReference
<
?
>
constructorDeclaringType
=
ctConstructorCall
.
getType
(
)
.
getDeclaringType
(
)
;
if
(
topLevelType
!=
null
&&
topLevelType
.
getReference
(
)
.
equals
(
constructorDeclaringType
)
&&
constructorDeclaringType
.
getActualTypeArguments
(
)
.
size
(
)
>
0
)
{
context
.
ignoreEnclosingClass
=
true
;
}
write
(
"new "
)
;
if
(
ctConstructorCall
.
getActualTypeArguments
(
)
.
size
(
)
>
0
)
{
writeActualTypeArguments
(
ctConstructorCall
)
;
}
scan
(
ctConstructorCall
.
getType
(
)
)
;
context
.
ignoreEnclosingClass
=
false
;
write
(
"("
)
;
boolean
remove
=
false
;
for
(
CtCodeElement
e
:
ctConstructorCall
.
getArguments
(
)
)
{
scan
(
e
)
;
write
(
" , "
)
;
remove
=
true
;
}
if
(
remove
)
{
removeLastChar
(
)
;
}
write
(
")"
)
;
exitCtExpression
(
ctConstructorCall
)
;
}
