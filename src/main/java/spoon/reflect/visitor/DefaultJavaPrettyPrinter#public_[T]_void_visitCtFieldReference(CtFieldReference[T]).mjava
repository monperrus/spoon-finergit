@Override
public
<
T
>
void
visitCtFieldReference
(
CtFieldReference
<
T
>
reference
)
{
boolean
isStatic
=
reference
.
getSimpleName
(
)
.
equals
(
"class"
)
||
!
reference
.
getSimpleName
(
)
.
equals
(
"super"
)
&&
reference
.
isStatic
(
)
;
boolean
printType
=
true
;
if
(
reference
.
isFinal
(
)
&&
reference
.
isStatic
(
)
)
{
CtTypeReference
<
?
>
declTypeRef
=
reference
.
getDeclaringType
(
)
;
if
(
context
.
currentTopLevel
!=
null
)
{
CtTypeReference
<
?
>
ref2
;
if
(
context
.
currentThis
!=
null
&&
context
.
currentThis
.
size
(
)
>
0
)
{
ref2
=
context
.
currentThis
.
peekFirst
(
)
;
}
else
{
ref2
=
context
.
currentTopLevel
.
getReference
(
)
;
}
printType
=
!
""
.
equals
(
declTypeRef
.
getSimpleName
(
)
)
&&
!
(
declTypeRef
.
equals
(
ref2
)
)
;
}
else
{
printType
=
!
""
.
equals
(
declTypeRef
.
getSimpleName
(
)
)
;
}
}
if
(
isStatic
&&
printType
&&
!
context
.
ignoreStaticAccess
)
{
context
.
ignoreGenerics
=
true
;
scan
(
reference
.
getDeclaringType
(
)
)
;
context
.
ignoreGenerics
=
false
;
printer
.
write
(
"."
)
;
}
printer
.
write
(
reference
.
getSimpleName
(
)
)
;
}
