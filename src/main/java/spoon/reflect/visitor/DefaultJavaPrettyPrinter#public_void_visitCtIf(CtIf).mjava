public
void
visitCtIf
(
CtIf
ifElement
)
{
enterCtStatement
(
ifElement
)
;
write
(
"if ("
)
;
scan
(
ifElement
.
getCondition
(
)
)
;
write
(
")"
)
;
if
(
ifElement
.
getThenStatement
(
)
instanceof
CtBlock
)
{
write
(
" "
)
;
scan
(
(
CtStatement
)
ifElement
.
getThenStatement
(
)
)
;
write
(
" "
)
;
}
else
{
incTab
(
)
.
writeln
(
)
.
writeTabs
(
)
;
List
<
CtComment
>
comments
=
getComments
(
ifElement
,
CommentOffset
.
INSIDE
)
;
for
(
CtComment
comment
:
comments
)
{
if
(
comment
.
getPosition
(
)
.
getSourceStart
(
)
<=
ifElement
.
getThenStatement
(
)
.
getPosition
(
)
.
getSourceStart
(
)
)
{
printComment
(
comment
)
;
}
}
writeStatement
(
ifElement
.
getThenStatement
(
)
)
;
if
(
env
.
isPreserveLineNumbers
(
)
)
{
decTab
(
)
;
}
else
{
decTab
(
)
.
writeln
(
)
.
writeTabs
(
)
;
}
}
if
(
ifElement
.
getElseStatement
(
)
!=
null
)
{
List
<
CtComment
>
comments
=
getComments
(
ifElement
,
CommentOffset
.
INSIDE
)
;
for
(
CtComment
comment
:
comments
)
{
if
(
comment
.
getPosition
(
)
.
getSourceStart
(
)
>
ifElement
.
getThenStatement
(
)
.
getPosition
(
)
.
getSourceEnd
(
)
)
{
printComment
(
comment
)
;
}
}
write
(
"else"
)
;
if
(
ifElement
.
getElseStatement
(
)
instanceof
CtIf
)
{
write
(
" "
)
;
scan
(
(
CtStatement
)
ifElement
.
getElseStatement
(
)
)
;
}
else
if
(
ifElement
.
getElseStatement
(
)
instanceof
CtBlock
)
{
write
(
" "
)
;
scan
(
(
CtStatement
)
ifElement
.
getElseStatement
(
)
)
;
}
else
{
incTab
(
)
.
writeln
(
)
.
writeTabs
(
)
;
writeStatement
(
ifElement
.
getElseStatement
(
)
)
;
if
(
env
.
isPreserveLineNumbers
(
)
)
{
decTab
(
)
;
}
else
{
decTab
(
)
.
writeln
(
)
.
writeTabs
(
)
;
}
}
}
}
