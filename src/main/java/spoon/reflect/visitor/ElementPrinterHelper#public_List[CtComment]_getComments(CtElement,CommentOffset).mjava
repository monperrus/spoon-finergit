public
List
<
CtComment
>
getComments
(
CtElement
element
,
CommentOffset
offset
)
{
List
<
CtComment
>
commentsToPrint
=
new
ArrayList
<
>
(
)
;
if
(
!
env
.
isCommentsEnabled
(
)
||
element
==
null
)
{
return
commentsToPrint
;
}
for
(
CtComment
comment
:
element
.
getComments
(
)
)
{
if
(
comment
.
getCommentType
(
)
==
CtComment
.
CommentType
.
FILE
&&
offset
==
CommentOffset
.
TOP_FILE
&&
element
.
getPosition
(
)
.
getSourceEnd
(
)
>
comment
.
getPosition
(
)
.
getSourceStart
(
)
)
{
commentsToPrint
.
add
(
comment
)
;
continue
;
}
if
(
comment
.
getCommentType
(
)
==
CtComment
.
CommentType
.
FILE
&&
offset
==
CommentOffset
.
BOTTOM_FILE
&&
element
.
getPosition
(
)
.
getSourceEnd
(
)
<
comment
.
getPosition
(
)
.
getSourceStart
(
)
)
{
commentsToPrint
.
add
(
comment
)
;
continue
;
}
if
(
comment
.
getCommentType
(
)
==
CtComment
.
CommentType
.
FILE
)
{
continue
;
}
if
(
comment
.
getPosition
(
)
.
isValidPosition
(
)
==
false
||
element
.
getPosition
(
)
.
isValidPosition
(
)
==
false
)
{
if
(
offset
==
CommentOffset
.
BEFORE
)
{
commentsToPrint
.
add
(
comment
)
;
}
continue
;
}
final
int
line
=
element
.
getPosition
(
)
.
getLine
(
)
;
final
int
sourceEnd
=
element
.
getPosition
(
)
.
getSourceEnd
(
)
;
final
int
sourceStart
=
element
.
getPosition
(
)
.
getSourceStart
(
)
;
if
(
offset
==
CommentOffset
.
BEFORE
&&
(
comment
.
getPosition
(
)
.
getLine
(
)
<
line
||
(
sourceStart
<=
comment
.
getPosition
(
)
.
getSourceStart
(
)
&&
sourceEnd
>
comment
.
getPosition
(
)
.
getSourceEnd
(
)
)
)
)
{
commentsToPrint
.
add
(
comment
)
;
}
else
if
(
offset
==
CommentOffset
.
AFTER
&&
(
comment
.
getPosition
(
)
.
getSourceStart
(
)
>
sourceEnd
||
comment
.
getPosition
(
)
.
getSourceEnd
(
)
==
sourceEnd
)
)
{
commentsToPrint
.
add
(
comment
)
;
}
else
{
final
int
endLine
=
element
.
getPosition
(
)
.
getEndLine
(
)
;
if
(
offset
==
CommentOffset
.
INSIDE
&&
comment
.
getPosition
(
)
.
getLine
(
)
>=
line
&&
comment
.
getPosition
(
)
.
getEndLine
(
)
<=
endLine
)
{
commentsToPrint
.
add
(
comment
)
;
}
}
}
return
commentsToPrint
;
}
