@SuppressWarnings("unchecked")
@Override
public
<
R
>
R
first
(
final
Class
<
R
>
itemClass
)
{
final
CtQueryContext
cc
=
createQueryContext
(
)
;
final
Object
[
]
result
=
new
Object
[
]
;
cc
.
outputConsumer
(
new
CtConsumer
<
R
>
(
)
{
@Override
public
void
accept
(
R
out
)
{
if
(
out
!=
null
&&
itemClass
.
isAssignableFrom
(
out
.
getClass
(
)
)
)
{
result
[
0
]
=
out
;
cc
.
terminate
(
)
;
}
}
}
)
;
for
(
Object
input
:
inputs
)
{
cc
.
accept
(
input
)
;
}
return
(
R
)
result
[
0
]
;
}
