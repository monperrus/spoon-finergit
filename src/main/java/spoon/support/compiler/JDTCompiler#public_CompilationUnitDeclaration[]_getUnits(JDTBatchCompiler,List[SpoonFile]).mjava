public
CompilationUnitDeclaration
[
]
getUnits
(
JDTBatchCompiler
compiler
,
List
<
SpoonFile
>
streams
)
throws
Exception
{
compiler
.
startTime
=
System
.
currentTimeMillis
(
)
;
INameEnvironment
environment
=
this
.
environment
;
if
(
environment
==
null
)
environment
=
compiler
.
getLibraryAccess
(
)
;
TreeBuilderCompiler
batchCompiler
=
new
TreeBuilderCompiler
(
environment
,
compiler
.
getHandlingPolicy
(
)
,
compiler
.
options
,
this
.
requestor
,
compiler
.
getProblemFactory
(
)
,
this
.
out
,
false
)
;
CompilationUnitDeclaration
[
]
units
=
batchCompiler
.
buildUnits
(
getCompilationUnits
(
streams
,
factory
)
)
;
return
units
;
}
