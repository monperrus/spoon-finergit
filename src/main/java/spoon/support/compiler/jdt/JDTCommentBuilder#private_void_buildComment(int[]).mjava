/** 
 * Inserts the comment at the position positions in the AST
 * @param positions the position of the comment
 */
private
void
buildComment
(
int
[
]
positions
)
{
int
start
=
positions
[
0
]
;
int
end
=
-
positions
[
1
]
;
CtComment
comment
=
factory
.
Core
(
)
.
createComment
(
)
;
comment
.
setCommentType
(
CtComment
.
CommentType
.
BLOCK
)
;
if
(
start
<
0
)
{
comment
.
setCommentType
(
CtComment
.
CommentType
.
INLINE
)
;
start
=
-
start
;
}
if
(
end
<=
0
)
{
comment
.
setCommentType
(
CtComment
.
CommentType
.
JAVADOC
)
;
end
=
-
end
;
}
String
commentContent
=
getCommentContent
(
start
,
end
)
;
int
[
]
lineSeparatorPositions
=
declarationUnit
.
compilationResult
.
lineSeparatorPositions
;
SourcePosition
sourcePosition
=
factory
.
Core
(
)
.
createSourcePosition
(
spoonUnit
,
start
,
end
,
lineSeparatorPositions
)
;
comment
.
setContent
(
commentContent
)
;
comment
.
setPosition
(
sourcePosition
)
;
insertCommentInAST
(
comment
)
;
}
