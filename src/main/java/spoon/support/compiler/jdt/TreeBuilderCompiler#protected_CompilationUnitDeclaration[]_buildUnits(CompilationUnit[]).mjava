protected
CompilationUnitDeclaration
[
]
buildUnits
(
CompilationUnit
[
]
sourceUnits
)
{
this
.
reportProgress
(
Messages
.
compilation_beginningToCompile
)
;
CompilationUnitDeclaration
unit
=
null
;
int
i
=
0
;
this
.
sortModuleDeclarationsFirst
(
sourceUnits
)
;
beginToCompile
(
sourceUnits
)
;
for
(
;
i
<
this
.
totalUnits
;
i
++
)
{
unit
=
unitsToProcess
[
i
]
;
this
.
reportProgress
(
Messages
.
bind
(
Messages
.
compilation_processing
,
new
String
(
unit
.
getFileName
(
)
)
)
)
;
this
.
parser
.
getMethodBodies
(
unit
)
;
if
(
unit
.
scope
!=
null
)
{
unit
.
scope
.
faultInTypes
(
)
;
}
if
(
unit
.
scope
!=
null
)
{
unit
.
scope
.
verifyMethods
(
lookupEnvironment
.
methodVerifier
(
)
)
;
}
unit
.
resolve
(
)
;
unit
.
analyseCode
(
)
;
unit
.
ignoreFurtherInvestigation
=
false
;
requestor
.
acceptResult
(
unit
.
compilationResult
)
;
this
.
reportWorked
(
1
,
i
)
;
}
ArrayList
<
CompilationUnitDeclaration
>
unitsToReturn
=
new
ArrayList
<
>
(
)
;
for
(
CompilationUnitDeclaration
cud
:
this
.
unitsToProcess
)
{
if
(
cud
!=
null
)
{
unitsToReturn
.
add
(
cud
)
;
}
}
return
unitsToReturn
.
toArray
(
new
CompilationUnitDeclaration
[
]
)
;
}
