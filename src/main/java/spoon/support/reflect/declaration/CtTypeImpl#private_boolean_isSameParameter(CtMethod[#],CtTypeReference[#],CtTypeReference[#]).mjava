private
boolean
isSameParameter
(
CtMethod
<
?
>
method
,
CtTypeReference
<
?
>
ctParameterType
,
CtTypeReference
<
?
>
expectedType
)
{
if
(
expectedType
instanceof
CtTypeParameterReference
)
{
CtTypeParameterReference
tpr
=
(
CtTypeParameterReference
)
expectedType
;
expectedType
=
tpr
.
clone
(
)
;
expectedType
.
setParent
(
method
)
;
if
(
expectedType
.
getDeclaration
(
)
==
null
)
{
return
false
;
}
}
if
(
expectedType
instanceof
CtTypeParameterReference
&&
ctParameterType
instanceof
CtTypeParameterReference
)
{
if
(
!
ctParameterType
.
equals
(
expectedType
)
)
{
return
false
;
}
}
else
if
(
expectedType
instanceof
CtTypeParameterReference
)
{
if
(
!
ctParameterType
.
isSubtypeOf
(
factory
.
Type
(
)
.
createReference
(
expectedType
.
getActualClass
(
)
)
)
)
{
return
false
;
}
}
else
if
(
ctParameterType
instanceof
CtTypeParameterReference
)
{
CtTypeParameter
declaration
=
(
CtTypeParameter
)
ctParameterType
.
getDeclaration
(
)
;
if
(
declaration
.
getSuperclass
(
)
instanceof
CtIntersectionTypeReference
)
{
for
(
CtTypeReference
<
?
>
ctTypeReference
:
declaration
.
getSuperclass
(
)
.
asCtIntersectionTypeReference
(
)
.
getBounds
(
)
)
{
if
(
ctTypeReference
.
equals
(
expectedType
)
)
{
return
true
;
}
}
}
else
if
(
declaration
.
getSuperclass
(
)
!=
null
)
{
return
declaration
.
getSuperclass
(
)
.
equals
(
expectedType
)
;
}
else
{
return
getFactory
(
)
.
Type
(
)
.
objectType
(
)
.
equals
(
expectedType
)
;
}
}
else
if
(
!
expectedType
.
getQualifiedName
(
)
.
equals
(
ctParameterType
.
getQualifiedName
(
)
)
)
{
return
false
;
}
return
true
;
}
