@Override
public
<
C
extends
CtType
<
T
>
>
C
addTypeMemberAt
(
int
position
,
CtTypeMember
member
)
{
if
(
member
==
null
)
{
return
(
C
)
this
;
}
if
(
this
.
typeMembers
==
CtElementImpl
.
emptyList
(
)
)
{
this
.
typeMembers
=
new
ArrayList
<
>
(
)
;
}
if
(
!
this
.
typeMembers
.
stream
(
)
.
anyMatch
(
m
->
m
==
member
)
)
{
member
.
setParent
(
this
)
;
CtRole
role
;
if
(
member
instanceof
CtMethod
)
{
role
=
METHOD
;
}
else
if
(
member
instanceof
CtConstructor
)
{
role
=
CONSTRUCTOR
;
}
else
if
(
member
instanceof
CtField
)
{
role
=
FIELD
;
}
else
if
(
member
instanceof
CtAnonymousExecutable
)
{
role
=
ANNONYMOUS_EXECUTABLE
;
}
else
{
role
=
NESTED_TYPE
;
}
getFactory
(
)
.
getEnvironment
(
)
.
getModelChangeListener
(
)
.
onListAdd
(
this
,
role
,
this
.
typeMembers
,
position
,
member
)
;
if
(
position
<
typeMembers
.
size
(
)
)
{
this
.
typeMembers
.
add
(
position
,
member
)
;
}
else
{
this
.
typeMembers
.
add
(
member
)
;
}
}
return
(
C
)
this
;
}
