public
<
T
>
void
visitCtConditional
(
CtConditional
<
T
>
conditional
)
{
CtExpression
<
Boolean
>
r
=
evaluate
(
conditional
,
conditional
.
getCondition
(
)
)
;
if
(
r
instanceof
CtLiteral
)
{
CtLiteral
<
Boolean
>
l
=
(
CtLiteral
<
Boolean
>
)
r
;
if
(
l
.
getValue
(
)
)
{
setResult
(
evaluate
(
null
,
conditional
.
getThenExpression
(
)
)
)
;
}
else
{
setResult
(
evaluate
(
null
,
conditional
.
getElseExpression
(
)
)
)
;
}
}
else
{
CtConditional
<
T
>
ifRes
=
conditional
.
getFactory
(
)
.
Core
(
)
.
createConditional
(
)
;
ifRes
.
setCondition
(
r
)
;
ifRes
.
setThenExpression
(
evaluate
(
ifRes
,
conditional
.
getThenExpression
(
)
)
)
;
ifRes
.
setElseExpression
(
evaluate
(
ifRes
,
conditional
.
getElseExpression
(
)
)
)
;
setResult
(
ifRes
)
;
}
}
