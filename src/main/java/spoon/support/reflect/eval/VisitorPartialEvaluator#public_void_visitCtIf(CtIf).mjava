public
void
visitCtIf
(
CtIf
ifElement
)
{
CtExpression
<
Boolean
>
r
=
evaluate
(
ifElement
,
ifElement
.
getCondition
(
)
)
;
if
(
r
instanceof
CtLiteral
)
{
CtLiteral
<
Boolean
>
l
=
(
CtLiteral
<
Boolean
>
)
r
;
if
(
l
.
getValue
(
)
)
{
setResult
(
evaluate
(
null
,
ifElement
.
getThenStatement
(
)
)
)
;
}
else
{
setResult
(
evaluate
(
null
,
ifElement
.
getElseStatement
(
)
)
)
;
}
}
else
{
CtIf
ifRes
=
ifElement
.
getFactory
(
)
.
Core
(
)
.
createIf
(
)
;
ifRes
.
setCondition
(
r
)
;
r
.
setParent
(
ifRes
)
;
boolean
thenEnded
=
false
,
elseEnded
=
false
;
ifRes
.
setThenStatement
(
evaluate
(
ifRes
,
ifElement
.
getThenStatement
(
)
)
)
;
if
(
flowEnded
)
{
thenEnded
=
true
;
flowEnded
=
false
;
}
ifRes
.
setElseStatement
(
evaluate
(
ifRes
,
ifElement
.
getElseStatement
(
)
)
)
;
if
(
flowEnded
)
{
elseEnded
=
true
;
flowEnded
=
false
;
}
setResult
(
ifRes
)
;
if
(
thenEnded
&&
elseEnded
)
{
flowEnded
=
true
;
}
}
}
