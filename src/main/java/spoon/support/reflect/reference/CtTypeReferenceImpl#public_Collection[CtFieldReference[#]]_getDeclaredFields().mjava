@Override
public
Collection
<
CtFieldReference
<
?
>
>
getDeclaredFields
(
)
{
Collection
<
CtFieldReference
<
?
>
>
l
=
new
ArrayList
<
>
(
)
;
CtType
<
?
>
t
=
getDeclaration
(
)
;
if
(
t
==
null
)
{
for
(
Field
f
:
getActualClass
(
)
.
getDeclaredFields
(
)
)
{
l
.
add
(
getFactory
(
)
.
Field
(
)
.
createReference
(
f
)
)
;
}
if
(
getActualClass
(
)
.
isAnnotation
(
)
)
{
for
(
Method
m
:
getActualClass
(
)
.
getDeclaredMethods
(
)
)
{
CtTypeReference
<
?
>
retRef
=
getFactory
(
)
.
Type
(
)
.
createReference
(
m
.
getReturnType
(
)
)
;
CtFieldReference
<
?
>
fr
=
getFactory
(
)
.
Field
(
)
.
createReference
(
this
,
retRef
,
m
.
getName
(
)
)
;
l
.
add
(
fr
)
;
}
}
}
else
{
return
t
.
getDeclaredFields
(
)
;
}
return
l
;
}
