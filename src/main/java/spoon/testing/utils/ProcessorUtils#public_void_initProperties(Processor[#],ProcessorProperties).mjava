public
static
void
initProperties
(
Processor
<
?
>
p
,
ProcessorProperties
properties
)
{
if
(
properties
!=
null
)
{
for
(
Field
f
:
RtHelper
.
getAllFields
(
p
.
getClass
(
)
)
)
{
if
(
f
.
isAnnotationPresent
(
Property
.
class
)
)
{
Object
obj
=
properties
.
get
(
f
.
getType
(
)
,
f
.
getName
(
)
)
;
if
(
obj
!=
null
)
{
f
.
setAccessible
(
true
)
;
try
{
f
.
set
(
p
,
obj
)
;
}
catch
(
Exception
e
)
{
throw
new
SpoonException
(
e
)
;
}
}
else
{
obj
=
properties
.
get
(
String
.
class
,
f
.
getName
(
)
)
;
if
(
obj
!=
null
)
{
try
{
obj
=
converter
.
readValue
(
(
String
)
obj
,
f
.
getType
(
)
)
;
f
.
setAccessible
(
true
)
;
f
.
set
(
p
,
obj
)
;
}
catch
(
Exception
e
)
{
throw
new
SpoonException
(
"Error while assigning the value to "
+
f
.
getName
(
)
,
e
)
;
}
}
else
{
p
.
getFactory
(
)
.
getEnvironment
(
)
.
report
(
p
,
Level
.
WARN
,
"No value found for property '"
+
f
.
getName
(
)
+
"' in processor "
+
p
.
getClass
(
)
.
getName
(
)
)
;
}
}
}
}
}
}
