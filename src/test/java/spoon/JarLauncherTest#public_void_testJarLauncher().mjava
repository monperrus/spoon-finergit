@Test
public
void
testJarLauncher
(
)
{
File
baseDir
=
new
File
(
"src/test/resources/jarLauncher"
)
;
File
pom
=
new
File
(
baseDir
,
"pom.xml"
)
;
File
jar
=
new
File
(
baseDir
,
"helloworld-1.0-SNAPSHOT.jar"
)
;
JarLauncher
launcher
=
new
JarLauncher
(
jar
.
getAbsolutePath
(
)
,
null
,
pom
.
getAbsolutePath
(
)
)
;
launcher
.
getEnvironment
(
)
.
setAutoImports
(
true
)
;
launcher
.
buildModel
(
)
;
CtModel
model
=
launcher
.
getModel
(
)
;
assertEquals
(
model
.
getAllTypes
(
)
.
size
(
)
,
5
)
;
CtConstructor
constructor
=
(
CtConstructor
)
model
.
getRootPackage
(
)
.
getFactory
(
)
.
Type
(
)
.
get
(
"se.kth.castor.UseJson"
)
.
getTypeMembers
(
)
.
get
(
0
)
;
CtTry
tryStmt
=
(
CtTry
)
constructor
.
getBody
(
)
.
getStatement
(
1
)
;
CtLocalVariable
var
=
(
CtLocalVariable
)
tryStmt
.
getBody
(
)
.
getStatement
(
0
)
;
assertNotNull
(
var
.
getType
(
)
.
getTypeDeclaration
(
)
)
;
}
