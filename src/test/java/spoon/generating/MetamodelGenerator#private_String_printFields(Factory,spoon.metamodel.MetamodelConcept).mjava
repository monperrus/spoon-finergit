private
static
String
printFields
(
Factory
factory
,
spoon
.
metamodel
.
MetamodelConcept
type
)
{
Map
<
CtRole
,
spoon
.
metamodel
.
MetamodelProperty
>
allFields
=
new
LinkedHashMap
<
>
(
type
.
getRoleToProperty
(
)
)
;
List
<
CtRole
>
rolesByScanner
=
getRoleScanningOrderOfType
(
factory
,
(
Class
)
type
.
getMetamodelInterface
(
)
.
getActualClass
(
)
)
;
List
<
String
>
elementFields
=
new
ArrayList
<
>
(
)
;
for
(
CtRole
ctRole
:
rolesByScanner
)
{
spoon
.
metamodel
.
MetamodelProperty
field
=
allFields
.
remove
(
ctRole
)
;
elementFields
.
add
(
printField
(
field
)
)
;
}
List
<
String
>
primitiveFields
=
new
ArrayList
<
>
(
)
;
new
ArrayList
(
allFields
.
keySet
(
)
)
.
stream
(
)
.
sorted
(
)
.
forEach
(
role
->
{
spoon
.
metamodel
.
MetamodelProperty
field
=
allFields
.
remove
(
role
)
;
primitiveFields
.
add
(
printField
(
field
)
)
;
}
)
;
if
(
allFields
.
isEmpty
(
)
==
false
)
{
throw
new
SpoonException
(
"There remained some fields?"
)
;
}
StringBuilder
sb
=
new
StringBuilder
(
)
;
primitiveFields
.
addAll
(
elementFields
)
;
primitiveFields
.
forEach
(
s
->
sb
.
append
(
s
)
.
append
(
'\n'
)
)
;
return
sb
.
toString
(
)
;
}
