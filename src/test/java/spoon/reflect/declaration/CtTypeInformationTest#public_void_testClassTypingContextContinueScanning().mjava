@Test
public
void
testClassTypingContextContinueScanning
(
)
throws
Exception
{
final
CtType
<
?
>
subClass
=
this
.
factory
.
Type
(
)
.
get
(
Subclass
.
class
)
;
final
CtTypeReference
<
?
>
subinterface
=
this
.
factory
.
Type
(
)
.
createReference
(
Subinterface
.
class
)
;
final
CtTypeReference
<
?
>
testInterface
=
this
.
factory
.
Type
(
)
.
createReference
(
TestInterface
.
class
)
;
final
CtTypeReference
<
?
>
extendObject
=
this
.
factory
.
Type
(
)
.
createReference
(
ExtendsArrayList
.
class
)
;
final
CtTypeReference
<
?
>
arrayList
=
this
.
factory
.
Type
(
)
.
createReference
(
ArrayList
.
class
)
;
final
CtTypeReference
<
?
>
abstractList
=
this
.
factory
.
Type
(
)
.
createReference
(
AbstractList
.
class
)
;
final
CtTypeReference
<
?
>
abstractCollection
=
this
.
factory
.
Type
(
)
.
createReference
(
AbstractCollection
.
class
)
;
final
CtTypeReference
<
?
>
object
=
this
.
factory
.
Type
(
)
.
createReference
(
Object
.
class
)
;
{
final
ClassTypingContext
ctc
=
(
ClassTypingContext
)
this
.
factory
.
createTypeAdapter
(
subClass
)
;
assertEquals
(
subClass
.
getQualifiedName
(
)
,
getLastResolvedSuperclass
(
ctc
)
.
getQualifiedName
(
)
)
;
assertTrue
(
ctc
.
isSubtypeOf
(
subClass
.
getReference
(
)
)
)
;
assertEquals
(
subClass
.
getQualifiedName
(
)
,
getLastResolvedSuperclass
(
ctc
)
.
getQualifiedName
(
)
)
;
assertTrue
(
ctc
.
isSubtypeOf
(
subinterface
)
)
;
assertEquals
(
subClass
.
getQualifiedName
(
)
,
getLastResolvedSuperclass
(
ctc
)
.
getQualifiedName
(
)
)
;
assertTrue
(
ctc
.
isSubtypeOf
(
testInterface
)
)
;
assertEquals
(
subClass
.
getQualifiedName
(
)
,
getLastResolvedSuperclass
(
ctc
)
.
getQualifiedName
(
)
)
;
assertTrue
(
ctc
.
isSubtypeOf
(
factory
.
createCtTypeReference
(
Comparable
.
class
)
)
)
;
assertEquals
(
subClass
.
getQualifiedName
(
)
,
getLastResolvedSuperclass
(
ctc
)
.
getQualifiedName
(
)
)
;
assertTrue
(
ctc
.
isSubtypeOf
(
extendObject
)
)
;
assertEquals
(
extendObject
.
getQualifiedName
(
)
,
getLastResolvedSuperclass
(
ctc
)
.
getQualifiedName
(
)
)
;
assertTrue
(
ctc
.
isSubtypeOf
(
arrayList
)
)
;
assertTrue
(
ctc
.
isSubtypeOf
(
extendObject
)
)
;
assertTrue
(
ctc
.
isSubtypeOf
(
subClass
.
getReference
(
)
)
)
;
assertEquals
(
arrayList
.
getQualifiedName
(
)
,
getLastResolvedSuperclass
(
ctc
)
.
getQualifiedName
(
)
)
;
assertTrue
(
ctc
.
isSubtypeOf
(
factory
.
createCtTypeReference
(
RandomAccess
.
class
)
)
)
;
assertEquals
(
arrayList
.
getQualifiedName
(
)
,
getLastResolvedSuperclass
(
ctc
)
.
getQualifiedName
(
)
)
;
assertTrue
(
ctc
.
isSubtypeOf
(
abstractList
)
)
;
assertEquals
(
abstractList
.
getQualifiedName
(
)
,
getLastResolvedSuperclass
(
ctc
)
.
getQualifiedName
(
)
)
;
assertTrue
(
ctc
.
isSubtypeOf
(
abstractCollection
)
)
;
assertEquals
(
abstractCollection
.
getQualifiedName
(
)
,
getLastResolvedSuperclass
(
ctc
)
.
getQualifiedName
(
)
)
;
assertTrue
(
ctc
.
isSubtypeOf
(
object
)
)
;
assertEquals
(
object
.
getQualifiedName
(
)
,
getLastResolvedSuperclass
(
ctc
)
.
getQualifiedName
(
)
)
;
assertFalse
(
ctc
.
isSubtypeOf
(
factory
.
Type
(
)
.
createReference
(
"java.io.InputStream"
)
)
)
;
assertNull
(
getLastResolvedSuperclass
(
ctc
)
)
;
assertTrue
(
ctc
.
isSubtypeOf
(
arrayList
)
)
;
assertTrue
(
ctc
.
isSubtypeOf
(
extendObject
)
)
;
assertTrue
(
ctc
.
isSubtypeOf
(
subClass
.
getReference
(
)
)
)
;
}
{
final
ClassTypingContext
ctc2
=
(
ClassTypingContext
)
this
.
factory
.
createTypeAdapter
(
subClass
)
;
assertEquals
(
subClass
.
getQualifiedName
(
)
,
getLastResolvedSuperclass
(
ctc2
)
.
getQualifiedName
(
)
)
;
assertFalse
(
ctc2
.
isSubtypeOf
(
factory
.
Type
(
)
.
createReference
(
"java.io.InputStream"
)
)
)
;
assertNull
(
getLastResolvedSuperclass
(
ctc2
)
)
;
assertTrue
(
ctc2
.
isSubtypeOf
(
arrayList
)
)
;
assertTrue
(
ctc2
.
isSubtypeOf
(
extendObject
)
)
;
assertTrue
(
ctc2
.
isSubtypeOf
(
subClass
.
getReference
(
)
)
)
;
}
}
