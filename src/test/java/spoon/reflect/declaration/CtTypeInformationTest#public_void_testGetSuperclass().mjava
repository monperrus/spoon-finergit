@Test
public
void
testGetSuperclass
(
)
throws
Exception
{
int
expectedNumberInJDK8_151
=
62
;
int
expectedNumberInJDK8_111
=
61
;
int
expectedNumberInJDK9
=
81
;
int
expectedNumber
;
if
(
System
.
getProperty
(
"java.version"
)
.
startsWith
(
"1.8."
)
)
{
if
(
System
.
getProperty
(
"java.version"
)
.
endsWith
(
"151"
)
)
{
expectedNumber
=
expectedNumberInJDK8_151
;
}
else
{
expectedNumber
=
expectedNumberInJDK8_111
;
}
}
else
{
expectedNumber
=
expectedNumberInJDK9
;
}
final
CtType
<
?
>
extendObject
=
this
.
factory
.
Type
(
)
.
get
(
ExtendsObject
.
class
)
;
Assert
.
assertEquals
(
1
,
extendObject
.
getMethods
(
)
.
size
(
)
)
;
Assert
.
assertEquals
(
expectedNumber
,
extendObject
.
getAllMethods
(
)
.
size
(
)
)
;
final
CtType
<
?
>
subClass
=
this
.
factory
.
Type
(
)
.
get
(
Subclass
.
class
)
;
assertEquals
(
2
,
subClass
.
getMethods
(
)
.
size
(
)
)
;
assertEquals
(
expectedNumber
+
2
,
subClass
.
getAllMethods
(
)
.
size
(
)
)
;
CtTypeReference
<
?
>
superclass
=
subClass
.
getSuperclass
(
)
;
Assert
.
assertEquals
(
ExtendsObject
.
class
.
getName
(
)
,
superclass
.
getQualifiedName
(
)
)
;
Assert
.
assertEquals
(
ExtendsObject
.
class
.
getName
(
)
,
superclass
.
getQualifiedName
(
)
)
;
Assert
.
assertNotNull
(
superclass
.
getSuperclass
(
)
)
;
Set
<
CtTypeReference
<
?
>
>
superInterfaces
=
subClass
.
getSuperInterfaces
(
)
;
Assert
.
assertEquals
(
1
,
superInterfaces
.
size
(
)
)
;
CtTypeReference
<
?
>
superinterface
=
superInterfaces
.
iterator
(
)
.
next
(
)
;
Assert
.
assertEquals
(
Subinterface
.
class
.
getName
(
)
,
superinterface
.
getQualifiedName
(
)
)
;
Assert
.
assertNull
(
superinterface
.
getSuperclass
(
)
)
;
final
CtType
<
?
>
type2
=
this
.
factory
.
Type
(
)
.
get
(
Subinterface
.
class
)
;
Assert
.
assertNull
(
type2
.
getSuperclass
(
)
)
;
CtMethod
<
?
>
fooConcrete
=
subClass
.
getMethodsByName
(
"foo"
)
.
get
(
0
)
;
CtMethod
<
?
>
fooAbstract
=
type2
.
getMethodsByName
(
"foo"
)
.
get
(
0
)
;
assertEquals
(
fooConcrete
.
getSignature
(
)
,
fooAbstract
.
getSignature
(
)
)
;
Assert
.
assertNotEquals
(
fooConcrete
,
fooAbstract
)
;
assertEquals
(
subClass
.
getMethodsByName
(
"foo"
)
.
get
(
0
)
.
getSignature
(
)
,
type2
.
getMethodsByName
(
"foo"
)
.
get
(
0
)
.
getSignature
(
)
)
;
}
