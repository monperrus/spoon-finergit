private
void
testBoxingFunction
(
Supplier
<
?
CtTypeReference
<
?
>
>
supplier
,
Class
<
?
>
inputClass
,
Class
<
?
>
expectedClass
,
boolean
mockClassLoader
,
Function
<
CtTypeReference
<
?
>
,
CtTypeReference
<
?
>
>
boxingFunction
)
throws
ClassNotFoundException
{
CtTypeReference
<
?
>
reference
=
supplier
.
get
(
)
;
reference
.
setFactory
(
factory
)
;
reference
.
setSimpleName
(
inputClass
.
getName
(
)
)
;
if
(
mockClassLoader
)
{
when
(
classLoader
.
loadClass
(
inputClass
.
getName
(
)
)
)
.
thenAnswer
(
(
Answer
<
Object
>
)
invocationOnMock
->
inputClass
)
;
}
CtTypeReference
<
?
>
result
=
boxingFunction
.
apply
(
reference
)
;
assertNotNull
(
result
)
;
assertEquals
(
expectedClass
.
getName
(
)
,
result
.
getQualifiedName
(
)
)
;
}
