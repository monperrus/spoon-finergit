/** 
 * Create the list of method we have to call for a class
 * @param entry
 * @return
 * @throws Exception
 */
private
List
<
Method
>
getMethodToInvoke
(
Class
<
?
>
entry
)
throws
Exception
{
Queue
<
Class
<
?
>
>
tocheck
=
new
LinkedList
<
>
(
)
;
tocheck
.
add
(
entry
)
;
List
<
Method
>
toInvoke
=
new
ArrayList
<
>
(
)
;
while
(
!
tocheck
.
isEmpty
(
)
)
{
Class
<
?
>
intf
=
tocheck
.
poll
(
)
;
Assert
.
assertTrue
(
intf
.
isInterface
(
)
)
;
if
(
!
intf
.
getSimpleName
(
)
.
startsWith
(
"Ct"
)
)
{
continue
;
}
Method
mth
=
null
;
try
{
mth
=
CtInheritanceScanner
.
class
.
getDeclaredMethod
(
"visit"
+
intf
.
getSimpleName
(
)
,
intf
)
;
if
(
mth
.
getAnnotation
(
Deprecated
.
class
)
!=
null
)
{
mth
=
null
;
}
}
catch
(
NoSuchMethodException
ex
)
{
}
if
(
mth
!=
null
&&
!
toInvoke
.
contains
(
mth
)
)
{
toInvoke
.
add
(
mth
)
;
}
try
{
mth
=
CtInheritanceScanner
.
class
.
getDeclaredMethod
(
"scan"
+
intf
.
getSimpleName
(
)
,
intf
)
;
if
(
mth
.
getAnnotation
(
Deprecated
.
class
)
!=
null
)
{
mth
=
null
;
}
}
catch
(
NoSuchMethodException
ex
)
{
}
if
(
mth
!=
null
&&
!
toInvoke
.
contains
(
mth
)
)
{
toInvoke
.
add
(
mth
)
;
}
for
(
Class
<
?
>
aClass
:
intf
.
getInterfaces
(
)
)
{
tocheck
.
add
(
aClass
)
;
}
}
return
toInvoke
;
}
