/** 
 * A return element is a flow break and a statement
 */
@Test
public
void
testCtInheritanceScanner
(
)
throws
Throwable
{
CtInheritanceScanner
mocked
=
mock
(
CtInheritanceScanner
.
class
)
;
List
<
Method
>
toInvoke
=
getMethodToInvoke
(
toTest
)
;
for
(
Method
method
:
toInvoke
)
{
method
.
invoke
(
Mockito
.
doCallRealMethod
(
)
.
when
(
mocked
)
,
instance
)
;
}
instance
.
accept
(
mocked
)
;
for
(
int
i
=
0
;
i
<
toInvoke
.
size
(
)
;
i
++
)
{
try
{
toInvoke
.
get
(
i
)
.
invoke
(
verify
(
mocked
)
,
instance
)
;
}
catch
(
InvocationTargetException
e
)
{
if
(
e
.
getTargetException
(
)
instanceof
AssertionError
)
{
fail
(
"visit"
+
instance
.
getClass
(
)
.
getSimpleName
(
)
.
replaceAll
(
"Impl$"
,
""
)
+
" does not call "
+
toInvoke
.
get
(
i
)
.
getName
(
)
)
;
}
else
{
throw
e
.
getTargetException
(
)
;
}
}
}
}
