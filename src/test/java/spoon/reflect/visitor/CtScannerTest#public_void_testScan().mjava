@Test
public
void
testScan
(
)
throws
Exception
{
Launcher
launcher
;
launcher
=
new
Launcher
(
)
;
launcher
.
getEnvironment
(
)
.
setNoClasspath
(
true
)
;
launcher
.
addInputResource
(
"src/test/resources/noclasspath/draw2d"
)
;
launcher
.
buildModel
(
)
;
class
Counter
{
int
nEnter
=
0
;
int
nExit
=
0
;
int
nObject
=
0
;
int
nElement
=
0
;
}
;
Counter
counter
=
new
Counter
(
)
;
launcher
.
getModel
(
)
.
getRootPackage
(
)
.
accept
(
new
CtScanner
(
)
{
@Override
public
void
scan
(
Object
o
)
{
counter
.
nObject
++
;
super
.
scan
(
o
)
;
}
@Override
public
void
scan
(
CtElement
o
)
{
counter
.
nElement
++
;
super
.
scan
(
o
)
;
}
@Override
public
void
enter
(
CtElement
o
)
{
counter
.
nEnter
++
;
super
.
enter
(
o
)
;
}
@Override
public
void
exit
(
CtElement
o
)
{
counter
.
nExit
++
;
super
.
exit
(
o
)
;
}
}
)
;
assertEquals
(
0
,
counter
.
nObject
)
;
assertEquals
(
3972
,
counter
.
nElement
)
;
assertEquals
(
2599
,
counter
.
nEnter
)
;
assertEquals
(
2599
,
counter
.
nExit
)
;
}
