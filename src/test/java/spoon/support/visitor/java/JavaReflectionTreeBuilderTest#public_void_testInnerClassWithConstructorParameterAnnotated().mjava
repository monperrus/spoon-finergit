@Test
public
void
testInnerClassWithConstructorParameterAnnotated
(
)
{
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
addInputResource
(
JavaReflectionTreeBuilderTest
.
class
.
getClassLoader
(
)
.
getResource
(
"annotated-parameter-on-nested-class-constructor/Caller.java"
)
.
getPath
(
)
)
;
launcher
.
getEnvironment
(
)
.
setSourceClasspath
(
new
String
[
]
{
"src/test/resources"
}
)
;
launcher
.
getEnvironment
(
)
.
setAutoImports
(
true
)
;
launcher
.
buildModel
(
)
;
Factory
factory
=
launcher
.
getFactory
(
)
;
CtType
caller
=
factory
.
Type
(
)
.
get
(
"Caller"
)
;
CtParameter
annotatedParameter
=
(
(
CtParameter
)
(
(
CtConstructor
)
(
(
CtLocalVariable
)
(
(
CtConstructor
)
caller
.
getTypeMembers
(
)
.
get
(
0
)
)
.
getBody
(
)
.
getStatement
(
2
)
)
.
getType
(
)
.
getTypeDeclaration
(
)
.
getTypeMembers
(
)
.
get
(
0
)
)
.
getParameters
(
)
.
get
(
0
)
)
;
assertEquals
(
"Bidon"
,
annotatedParameter
.
getAnnotations
(
)
.
get
(
0
)
.
getAnnotationType
(
)
.
getSimpleName
(
)
)
;
}
