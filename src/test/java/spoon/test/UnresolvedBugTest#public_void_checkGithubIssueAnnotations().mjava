/** 
 * Checks if every githubIssue annotation has an open github issue.
 */
@Test
public
void
checkGithubIssueAnnotations
(
)
throws
IOException
{
testMethods
=
testMethods
.
stream
(
)
.
filter
(
v
->
v
.
hasAnnotation
(
Test
.
class
)
&&
v
.
hasAnnotation
(
GitHubIssue
.
class
)
)
.
collect
(
Collectors
.
toList
(
)
)
;
for
(
CtMethod
<
?
>
ctMethod
:
testMethods
)
{
int
issueNumber
=
ctMethod
.
getAnnotation
(
GitHubIssue
.
class
)
.
issueNumber
(
)
;
URL
url
=
new
URL
(
githubURL
+
issueNumber
)
;
String
data
=
new
BufferedReader
(
new
InputStreamReader
(
url
.
openStream
(
)
)
)
.
lines
(
)
.
collect
(
Collectors
.
joining
(
)
)
;
JsonObject
issue
=
new
Gson
(
)
.
fromJson
(
data
,
JsonObject
.
class
)
;
assertTrue
(
issue
.
get
(
"number"
)
.
getAsInt
(
)
==
issueNumber
)
;
assertTrue
(
issue
.
get
(
"state"
)
.
getAsString
(
)
.
equals
(
OPEN_ISSUE_TEXT
)
)
;
}
}
