@Test
public
void
annotationAddValue
(
)
{
Launcher
spoon
=
new
Launcher
(
)
;
spoon
.
addInputResource
(
"./src/test/java/spoon/test/annotation/testclasses/Bar.java"
)
;
spoon
.
buildModel
(
)
;
factory
=
spoon
.
getFactory
(
)
;
List
<
CtMethod
>
methods
=
factory
.
getModel
(
)
.
getElements
(
new
NamedElementFilter
<
CtMethod
>
(
CtMethod
.
class
,
"bidule"
)
)
;
assertThat
(
methods
.
size
(
)
,
is
(
1
)
)
;
CtAnnotation
anno1
=
factory
.
Annotation
(
)
.
annotate
(
methods
.
get
(
0
)
,
TypeAnnotation
.
class
)
.
addValue
(
"params"
,
new
String
[
]
{
"test"
}
)
;
assertThat
(
anno1
.
getValue
(
"params"
)
.
getType
(
)
,
is
(
factory
.
Type
(
)
.
createReference
(
String
[
]
.
class
)
)
)
;
CtAnnotation
anno
=
factory
.
Annotation
(
)
.
annotate
(
methods
.
get
(
0
)
,
TypeAnnotation
.
class
)
.
addValue
(
"params"
,
new
String
[
]
)
;
assertThat
(
anno
.
getValue
(
"params"
)
.
getType
(
)
,
is
(
factory
.
Type
(
)
.
createReference
(
String
[
]
.
class
)
)
)
;
}
