@Test
public
void
testAbstractAllAnnotationProcessorWithGlobalAnnotation
(
)
throws
Exception
{
Launcher
spoon
=
new
Launcher
(
)
;
spoon
.
addInputResource
(
"./src/test/java/spoon/test/annotation/testclasses/ClassProcessed.java"
)
;
spoon
.
addInputResource
(
"./src/test/java/spoon/test/annotation/testclasses/TypeAnnotation.java"
)
;
spoon
.
addInputResource
(
"./src/test/java/spoon/test/annotation/testclasses/AnnotParamTypeEnum.java"
)
;
spoon
.
addInputResource
(
"./src/test/java/spoon/test/annotation/testclasses/InnerAnnot.java"
)
;
spoon
.
addInputResource
(
"./src/test/java/spoon/test/annotation/testclasses/Inception.java"
)
;
spoon
.
addInputResource
(
"./src/test/java/spoon/test/annotation/testclasses/GlobalAnnotation.java"
)
;
spoon
.
addInputResource
(
"./src/test/java/spoon/test/annotation/testclasses/TestAnnotation.java"
)
;
factory
=
spoon
.
getFactory
(
)
;
spoon
.
buildModel
(
)
;
final
ProcessingManager
p
=
new
QueueProcessingManager
(
factory
)
;
final
GlobalProcessor
processor
=
new
GlobalProcessor
(
)
;
p
.
addProcessor
(
processor
)
;
final
TypeAnnotationMethodProcessor
methodProcessor
=
new
TypeAnnotationMethodProcessor
(
)
;
p
.
addProcessor
(
methodProcessor
)
;
p
.
process
(
factory
.
Class
(
)
.
getAll
(
)
)
;
assertEquals
(
5
,
processor
.
elements
.
size
(
)
)
;
assertEquals
(
1
,
methodProcessor
.
elements
.
size
(
)
)
;
}
