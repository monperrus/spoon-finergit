@Test
public
void
testAnnotationAndShadowRuntimeRetentionPolicy
(
)
{
final
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
addInputResource
(
"./src/test/java/spoon/test/annotation/testclasses/shadow"
)
;
CtModel
model
=
launcher
.
buildModel
(
)
;
CtClass
<
?
>
dumbKlass
=
model
.
getElements
(
new
NamedElementFilter
<
>
(
CtClass
.
class
,
"DumbKlass"
)
)
.
get
(
0
)
;
CtMethod
<
?
>
fooMethod
=
dumbKlass
.
getMethodsByName
(
"barOneValue"
)
.
get
(
0
)
;
final
Factory
shadowFactory
=
createFactory
(
)
;
CtType
<
?
>
shadowDumbKlass
=
shadowFactory
.
Type
(
)
.
get
(
DumbKlass
.
class
)
;
CtMethod
<
?
>
shadowFooMethod
=
shadowDumbKlass
.
getMethodsByName
(
"barOneValue"
)
.
get
(
0
)
;
assertEquals
(
fooMethod
.
getAnnotations
(
)
.
size
(
)
,
shadowFooMethod
.
getAnnotations
(
)
.
size
(
)
)
;
}
