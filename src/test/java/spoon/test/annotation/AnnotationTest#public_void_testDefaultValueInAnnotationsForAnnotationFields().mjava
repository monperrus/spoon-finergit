@Test
public
void
testDefaultValueInAnnotationsForAnnotationFields
(
)
{
final
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
addInputResource
(
"./src/test/java/spoon/test/annotation/testclasses/AnnotationDefaultAnnotation.java"
)
;
launcher
.
buildModel
(
)
;
Factory
factory
=
launcher
.
getFactory
(
)
;
final
CtType
<
?
>
annotation
=
factory
.
Type
(
)
.
get
(
AnnotationDefaultAnnotation
.
class
)
;
final
CtAnnotationMethod
<
?
>
ctAnnotations
=
annotation
.
getMethods
(
)
.
toArray
(
new
CtAnnotationMethod
<
?
>
[
]
)
[
0
]
;
assertSame
(
"Field is typed by an annotation."
,
InnerAnnot
.
class
,
ctAnnotations
.
getType
(
)
.
getActualClass
(
)
)
;
assertSame
(
"Default value of a field typed by an annotation must be an annotation"
,
InnerAnnot
.
class
,
ctAnnotations
.
getDefaultExpression
(
)
.
getType
(
)
.
getActualClass
(
)
)
;
}
