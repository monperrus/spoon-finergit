@Test
public
void
testFieldAndMethodInAnnotation
(
)
throws
Exception
{
final
CtType
<
SuperAnnotation
>
aTypeAnnotation
=
buildClass
(
SuperAnnotation
.
class
)
;
final
CtField
<
?
>
fieldValue
=
aTypeAnnotation
.
getField
(
"value"
)
;
assertNotNull
(
fieldValue
)
;
assertEquals
(
"java.lang.String value = \"\";"
,
fieldValue
.
toString
(
)
)
;
final
CtMethod
<
Object
>
methodValue
=
aTypeAnnotation
.
getMethod
(
"value"
)
;
assertTrue
(
methodValue
instanceof
CtAnnotationMethod
)
;
assertEquals
(
"java.lang.String value() default spoon.test.annotation.testclasses.SuperAnnotation.value;"
,
methodValue
.
toString
(
)
)
;
final
CtMethod
<
Object
>
methodNoDefault
=
aTypeAnnotation
.
getMethod
(
"value1"
)
;
assertTrue
(
methodNoDefault
instanceof
CtAnnotationMethod
)
;
assertEquals
(
"java.lang.String value1();"
,
methodNoDefault
.
toString
(
)
)
;
assertEquals
(
2
,
aTypeAnnotation
.
getMethods
(
)
.
size
(
)
)
;
aTypeAnnotation
.
addMethod
(
methodValue
.
clone
(
)
)
;
assertEquals
(
2
,
aTypeAnnotation
.
getMethods
(
)
.
size
(
)
)
;
}
