@Test
public
void
testRepeatableAnnotationAreManagedWithArrays
(
)
{
Launcher
spoon
=
new
Launcher
(
)
;
spoon
.
addInputResource
(
"./src/test/java/spoon/test/annotation/testclasses/repeatandarrays"
)
;
spoon
.
buildModel
(
)
;
CtType
type
=
spoon
.
getFactory
(
)
.
Type
(
)
.
get
(
RepeatedArrays
.
class
)
;
CtMethod
firstMethod
=
(
CtMethod
)
type
.
getMethodsByName
(
"method"
)
.
get
(
0
)
;
List
<
CtAnnotation
<
?
>
>
annotations
=
firstMethod
.
getAnnotations
(
)
;
assertEquals
(
2
,
annotations
.
size
(
)
)
;
for
(
CtAnnotation
a
:
annotations
)
{
assertEquals
(
"TagArrays"
,
a
.
getAnnotationType
(
)
.
getSimpleName
(
)
)
;
}
String
classContent
=
type
.
toString
(
)
;
assertTrue
(
"Content of the file: "
+
classContent
,
classContent
.
contains
(
"@spoon.test.annotation.testclasses.repeatandarrays.TagArrays({ \"machin\", \"truc\" })"
)
)
;
assertTrue
(
"Content of the file: "
+
classContent
,
classContent
.
contains
(
"@spoon.test.annotation.testclasses.repeatandarrays.TagArrays({ \"truc\", \"bidule\" })"
)
)
;
}
