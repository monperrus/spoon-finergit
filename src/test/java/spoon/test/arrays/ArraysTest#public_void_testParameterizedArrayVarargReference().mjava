@Test
public
void
testParameterizedArrayVarargReference
(
)
throws
Exception
{
CtType
<
?
>
ctClass
=
ModelUtils
.
buildClass
(
VaragParam
.
class
)
;
CtParameter
<
?
>
param1
=
ctClass
.
getMethodsByName
(
"m3"
)
.
get
(
0
)
.
getParameters
(
)
.
get
(
0
)
;
CtArrayTypeReference
<
?
>
varArg1TypeRef
=
(
CtArrayTypeReference
<
?
>
)
param1
.
getType
(
)
;
assertEquals
(
"java.util.List<?>[][]"
,
varArg1TypeRef
.
toString
(
)
)
;
assertEquals
(
"java.util.List<?>[]"
,
varArg1TypeRef
.
getComponentType
(
)
.
toString
(
)
)
;
assertEquals
(
"java.util.List<?>"
,
(
(
CtArrayTypeReference
<
?
>
)
varArg1TypeRef
.
getComponentType
(
)
)
.
getComponentType
(
)
.
toString
(
)
)
;
assertEquals
(
1
,
(
(
CtArrayTypeReference
<
?
>
)
varArg1TypeRef
.
getComponentType
(
)
)
.
getComponentType
(
)
.
getActualTypeArguments
(
)
.
size
(
)
)
;
assertEquals
(
0
,
varArg1TypeRef
.
getComponentType
(
)
.
getActualTypeArguments
(
)
.
size
(
)
)
;
assertEquals
(
0
,
varArg1TypeRef
.
getActualTypeArguments
(
)
.
size
(
)
)
;
}
