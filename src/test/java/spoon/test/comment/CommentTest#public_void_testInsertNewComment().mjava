@Test
public
void
testInsertNewComment
(
)
{
Factory
f
=
getSpoonFactory
(
)
;
CtClass
<
?
>
type
=
(
CtClass
<
?
>
)
f
.
Type
(
)
.
get
(
InlineComment
.
class
)
;
CtMethod
method
=
f
.
Core
(
)
.
createMethod
(
)
;
method
.
setSimpleName
(
"newMethod"
)
;
method
.
setBody
(
f
.
Core
(
)
.
createBlock
(
)
)
;
method
.
setType
(
f
.
Type
(
)
.
VOID_PRIMITIVE
)
;
type
.
addMethod
(
method
)
;
method
.
addComment
(
createFakeComment
(
f
,
"comment method"
)
)
;
method
.
getBody
(
)
.
addStatement
(
createFakeComment
(
f
,
"comment empty block"
)
)
;
assertEquals
(
"// comment method"
+
newLine
+
"void newMethod() {"
+
newLine
+
"    // comment empty block"
+
newLine
+
"}"
,
method
.
toString
(
)
)
;
method
.
getBody
(
)
.
removeStatement
(
method
.
getBody
(
)
.
getStatement
(
0
)
)
;
CtLocalVariable
<
Integer
>
i
=
f
.
Code
(
)
.
createLocalVariable
(
f
.
Type
(
)
.
INTEGER_PRIMITIVE
,
"i"
,
null
)
;
i
.
addComment
(
createFakeComment
(
f
,
"comment local variable"
)
)
;
method
.
getBody
(
)
.
addStatement
(
i
)
;
assertEquals
(
"// comment method"
+
newLine
+
"void newMethod() {"
+
newLine
+
"    // comment local variable"
+
newLine
+
"    int i;"
+
newLine
+
"}"
,
method
.
toString
(
)
)
;
}
