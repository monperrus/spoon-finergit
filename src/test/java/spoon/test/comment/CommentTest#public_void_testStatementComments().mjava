@Test
public
void
testStatementComments
(
)
{
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
addInputResource
(
"./src/test/java/spoon/test/comment/testclasses/CommentsOnStatements.java"
)
;
launcher
.
getEnvironment
(
)
.
setCommentEnabled
(
true
)
;
CtModel
model
=
launcher
.
buildModel
(
)
;
List
<
CtStatement
>
statements
=
launcher
.
getFactory
(
)
.
Type
(
)
.
get
(
CommentsOnStatements
.
class
)
.
getMethodsByName
(
"m1"
)
.
get
(
0
)
.
getBody
(
)
.
getStatements
(
)
;
assertEquals
(
2
,
statements
.
size
(
)
)
;
CtIf
ifStatement
=
(
CtIf
)
statements
.
get
(
0
)
;
assertEquals
(
Arrays
.
asList
(
"// c1"
)
,
getCommentStrings
(
ifStatement
)
)
;
assertEquals
(
Arrays
.
asList
(
"// c2 belongs to toto"
)
,
getCommentStrings
(
(
(
CtBlock
)
ifStatement
.
getThenStatement
(
)
)
.
getStatement
(
0
)
)
)
;
CtIf
if2Statement
=
(
CtIf
)
(
(
CtBlock
)
ifStatement
.
getElseStatement
(
)
)
.
getStatement
(
0
)
;
assertEquals
(
"// c3 belongs to getClass\nthis.getClass()"
,
(
(
CtBlock
)
if2Statement
.
getThenStatement
(
)
)
.
getStatement
(
0
)
.
toString
(
)
)
;
assertEquals
(
Arrays
.
asList
(
"// c3 belongs to getClass"
)
,
getCommentStrings
(
(
(
CtBlock
)
if2Statement
.
getThenStatement
(
)
)
.
getStatement
(
0
)
)
)
;
assertEquals
(
Arrays
.
asList
(
"// c4 comment of return"
)
,
getCommentStrings
(
statements
.
get
(
1
)
)
)
;
}
