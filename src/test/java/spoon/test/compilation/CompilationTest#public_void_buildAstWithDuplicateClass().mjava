@Test
public
void
buildAstWithDuplicateClass
(
)
{
File
testFile
=
new
File
(
"src/test/resources/duplicateClass/DuplicateInnerClass.java"
)
;
String
absoluteTestPath
=
testFile
.
getAbsolutePath
(
)
;
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
addInputResource
(
absoluteTestPath
)
;
final
CtModel
model
=
launcher
.
buildModel
(
)
;
final
List
<
String
>
pkgNames
=
model
.
getElements
(
new
TypeFilter
<
>
(
CtPackage
.
class
)
)
.
stream
(
)
.
map
(
CtPackage
::
getQualifiedName
)
.
collect
(
Collectors
.
toList
(
)
)
;
assertTrue
(
pkgNames
.
contains
(
"P.F.G"
)
)
;
final
List
<
String
>
classNames
=
model
.
getElements
(
new
TypeFilter
<
>
(
CtType
.
class
)
)
.
stream
(
)
.
map
(
CtType
::
getQualifiedName
)
.
collect
(
Collectors
.
toList
(
)
)
;
assertTrue
(
classNames
.
contains
(
"P.F.G.DuplicateInnerClass"
)
)
;
assertTrue
(
classNames
.
contains
(
"P.F.G.DuplicateInnerClass$B"
)
)
;
assertTrue
(
classNames
.
contains
(
"P.F.G.DuplicateInnerClass$B$B"
)
)
;
}
