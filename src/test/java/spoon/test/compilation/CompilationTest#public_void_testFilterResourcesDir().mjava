@Test
public
void
testFilterResourcesDir
(
)
throws
Exception
{
Launcher
launcher
=
new
Launcher
(
)
{
@Override
public
SpoonModelBuilder
createCompiler
(
)
{
return
new
JDTBasedSpoonCompiler
(
getFactory
(
)
)
{
@Override
protected
JDTBatchCompiler
createBatchCompiler
(
)
{
return
new
JDTBatchCompiler
(
this
)
{
@Override
public
CompilationUnit
[
]
getCompilationUnits
(
)
{
List
<
CompilationUnit
>
units
=
new
ArrayList
<
>
(
)
;
for
(
CompilationUnit
u
:
super
.
getCompilationUnits
(
)
)
{
if
(
new
String
(
u
.
getFileName
(
)
)
.
contains
(
"/reference/"
)
)
{
units
.
add
(
u
)
;
}
}
return
units
.
toArray
(
new
CompilationUnit
[
]
)
;
}
}
;
}
}
;
}
}
;
launcher
.
addInputResource
(
"./src/test/java/spoon/test"
)
;
launcher
.
buildModel
(
)
;
int
n
=
0
;
for
(
CtType
<
?
>
t
:
launcher
.
getModel
(
)
.
getAllTypes
(
)
)
{
n
++
;
assertTrue
(
t
.
getQualifiedName
(
)
.
contains
(
"reference"
)
)
;
}
assertTrue
(
n
>=
2
)
;
}
