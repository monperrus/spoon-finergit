@Test
public
void
testFilterResourcesFile
(
)
throws
Exception
{
Launcher
launcher
=
new
Launcher
(
)
{
@Override
public
SpoonCompiler
createCompiler
(
)
{
return
new
JDTBasedSpoonCompiler
(
getFactory
(
)
)
{
@Override
protected
FileCompiler
createBatchCompiler
(
InputType
...
args
)
{
return
new
FileCompiler
(
this
)
{
@Override
public
CompilationUnit
[
]
getCompilationUnits
(
)
{
List
<
CompilationUnit
>
units
=
new
ArrayList
<
>
(
)
;
for
(
CompilationUnit
u
:
super
.
getCompilationUnits
(
)
)
{
if
(
new
String
(
u
.
getMainTypeName
(
)
)
.
contains
(
"Foo"
)
)
{
units
.
add
(
u
)
;
}
}
return
units
.
toArray
(
new
CompilationUnit
[
]
)
;
}
}
;
}
}
;
}
}
;
launcher
.
addInputResource
(
"./src/test/java"
)
;
launcher
.
buildModel
(
)
;
for
(
CtType
<
?
>
t
:
launcher
.
getFactory
(
)
.
getModel
(
)
.
getAllTypes
(
)
)
{
assertTrue
(
t
.
getPosition
(
)
.
getFile
(
)
.
getAbsolutePath
(
)
.
contains
(
"Foo"
)
)
;
}
}
