@Test
public
void
testNestedTypes
(
)
throws
IOException
{
final
String
input
=
"./src/test/java/spoon/test/imports/testclasses/internal/PublicInterface2.java"
;
final
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
addInputResource
(
input
)
;
launcher
.
setBinaryOutputDirectory
(
tmpFolder
.
getRoot
(
)
)
;
launcher
.
buildModel
(
)
;
launcher
.
getModelBuilder
(
)
.
compile
(
SpoonModelBuilder
.
InputType
.
FILES
)
;
final
Map
<
String
,
CompilationUnit
>
cus
=
launcher
.
getFactory
(
)
.
CompilationUnit
(
)
.
getMap
(
)
;
assertEquals
(
1
,
cus
.
size
(
)
)
;
final
List
<
File
>
binaries
=
cus
.
get
(
new
File
(
input
)
.
getCanonicalFile
(
)
.
getAbsolutePath
(
)
)
.
getBinaryFiles
(
)
;
assertEquals
(
3
,
binaries
.
size
(
)
)
;
assertEquals
(
"PublicInterface2.class"
,
binaries
.
get
(
0
)
.
getName
(
)
)
;
assertEquals
(
"PublicInterface2$NestedInterface.class"
,
binaries
.
get
(
1
)
.
getName
(
)
)
;
assertEquals
(
"PublicInterface2$NestedClass.class"
,
binaries
.
get
(
2
)
.
getName
(
)
)
;
assertTrue
(
binaries
.
get
(
0
)
.
isFile
(
)
)
;
assertTrue
(
binaries
.
get
(
1
)
.
isFile
(
)
)
;
assertTrue
(
binaries
.
get
(
2
)
.
isFile
(
)
)
;
}
