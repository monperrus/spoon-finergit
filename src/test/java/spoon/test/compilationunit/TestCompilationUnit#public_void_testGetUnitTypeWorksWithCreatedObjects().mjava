@Test
public
void
testGetUnitTypeWorksWithCreatedObjects
(
)
{
final
Launcher
launcher
=
new
Launcher
(
)
;
CtPackage
myFooPackage
=
launcher
.
getFactory
(
)
.
Package
(
)
.
getOrCreate
(
"my.foo"
)
;
CompilationUnit
cu
=
launcher
.
getFactory
(
)
.
createCompilationUnit
(
)
;
assertEquals
(
CompilationUnit
.
UNIT_TYPE
.
UNKNOWN
,
cu
.
getUnitType
(
)
)
;
cu
.
setDeclaredPackage
(
myFooPackage
)
;
assertEquals
(
CompilationUnit
.
UNIT_TYPE
.
PACKAGE_DECLARATION
,
cu
.
getUnitType
(
)
)
;
cu
.
setDeclaredTypes
(
Collections
.
singletonList
(
launcher
.
getFactory
(
)
.
createClass
(
)
)
)
;
assertEquals
(
CompilationUnit
.
UNIT_TYPE
.
TYPE_DECLARATION
,
cu
.
getUnitType
(
)
)
;
}
