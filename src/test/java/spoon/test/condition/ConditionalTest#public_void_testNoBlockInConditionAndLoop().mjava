@Test
public
void
testNoBlockInConditionAndLoop
(
)
throws
Exception
{
String
newLine
=
System
.
getProperty
(
"line.separator"
)
;
final
CtType
<
Foo
>
aFoo
=
ModelUtils
.
buildClass
(
Foo
.
class
)
;
CtMethod
<
Object
>
method
=
aFoo
.
getMethod
(
"m3"
)
;
final
List
<
CtIf
>
conditions
=
method
.
getElements
(
new
TypeFilter
<
>
(
CtIf
.
class
)
)
;
for
(
int
i
=
0
;
i
<
conditions
.
size
(
)
;
i
++
)
{
CtIf
ctIf
=
conditions
.
get
(
i
)
;
CtStatement
then
=
(
(
CtBlock
)
ctIf
.
getThenStatement
(
)
)
.
getStatement
(
0
)
;
ctIf
.
setThenStatement
(
then
)
;
if
(
ctIf
.
getElseStatement
(
)
!=
null
)
{
CtStatement
elseStatement
=
(
(
CtBlock
)
ctIf
.
getElseStatement
(
)
)
.
getStatement
(
0
)
;
ctIf
.
setElseStatement
(
elseStatement
)
;
}
}
assertEquals
(
"if (true)"
+
newLine
+
"    java.lang.System.out.println();"
+
newLine
+
"else if (true)"
+
newLine
+
"    java.lang.System.out.println();"
+
newLine
+
"else"
+
newLine
+
"    java.lang.System.out.println();"
+
newLine
,
method
.
getBody
(
)
.
getStatement
(
0
)
.
toString
(
)
)
;
}
