@Test
public
void
testNoThenBlockBug2
(
)
throws
Exception
{
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
addInputResource
(
"src/test/java/spoon/test/condition/testclasses/Foo2.java"
)
;
CtModel
m
=
launcher
.
buildModel
(
)
;
CtType
<
?
>
aFoo
=
m
.
getAllTypes
(
)
.
stream
(
)
.
filter
(
t
->
t
.
getSimpleName
(
)
.
equals
(
"Foo2"
)
)
.
findFirst
(
)
.
get
(
)
;
CtMethod
<
Object
>
method
=
aFoo
.
getMethod
(
"bug2"
)
;
final
List
<
CtIf
>
conditions
=
method
.
getElements
(
new
TypeFilter
<
>
(
CtIf
.
class
)
)
;
CtIf
cond
=
conditions
.
get
(
0
)
;
CtStatement
thenStatement
=
cond
.
getThenStatement
(
)
;
CtStatement
elseStatement
=
cond
.
getElseStatement
(
)
;
assertEquals
(
"java.lang.System.out.println(\"valid\");"
,
thenStatement
.
toString
(
)
.
trim
(
)
)
;
CtIf
innerIf
=
(
(
CtBlock
)
elseStatement
)
.
getStatement
(
0
)
;
assertNull
(
innerIf
.
getThenStatement
(
)
)
;
assertEquals
(
"java.lang.System.out.println(\"invalid\");"
,
innerIf
.
getElseStatement
(
)
.
toString
(
)
.
trim
(
)
)
;
}
