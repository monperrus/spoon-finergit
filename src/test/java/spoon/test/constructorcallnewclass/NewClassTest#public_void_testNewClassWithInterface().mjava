@Test
public
void
testNewClassWithInterface
(
)
{
final
CtNewClass
<
?
>
newClass
=
newClasses
.
get
(
1
)
;
assertType
(
Foo
.
Bar
.
class
,
newClass
)
;
assertIsConstructor
(
newClass
.
getExecutable
(
)
)
;
assertHasParameters
(
0
,
newClass
.
getArguments
(
)
)
;
assertIsAnonymous
(
newClass
.
getAnonymousClass
(
)
)
;
assertSuperInterface
(
Foo
.
Bar
.
class
,
newClass
.
getAnonymousClass
(
)
)
;
Factory
factory
=
newClass
.
getFactory
(
)
;
CtNewClass
<
?
>
klass
=
factory
.
createNewClass
(
factory
.
Type
(
)
.
get
(
Foo
.
class
)
)
;
assertEquals
(
"new spoon.test.constructorcallnewclass.testclasses.Foo() {}"
,
klass
.
toString
(
)
)
;
CtNewClass
<
?
>
klass2
=
factory
.
createNewClass
(
factory
.
Type
(
)
.
get
(
Foo
.
class
)
,
factory
.
createLiteral
(
42
)
)
;
assertEquals
(
"new spoon.test.constructorcallnewclass.testclasses.Foo(42) {}"
,
klass2
.
toString
(
)
)
;
}
