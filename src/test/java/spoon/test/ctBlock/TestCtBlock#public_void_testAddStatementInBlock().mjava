@Test
public
void
testAddStatementInBlock
(
)
{
Launcher
spoon
=
new
Launcher
(
)
;
spoon
.
addInputResource
(
"./src/test/java/spoon/test/ctBlock/testclasses/Toto.java"
)
;
spoon
.
buildModel
(
)
;
CtClass
<
?
>
toto
=
spoon
.
getFactory
(
)
.
Class
(
)
.
get
(
Toto
.
class
)
;
CtMethod
foo
=
toto
.
getMethodsByName
(
"foo"
)
.
get
(
0
)
;
CtBlock
block
=
foo
.
getBody
(
)
;
CtBlock
originalBlock
=
block
.
clone
(
)
;
assertEquals
(
4
,
block
.
getStatements
(
)
.
size
(
)
)
;
block
.
addStatement
(
1
,
(
CtStatement
)
spoon
.
getFactory
(
)
.
createInvocation
(
)
.
setExecutable
(
foo
.
getReference
(
)
)
)
;
assertEquals
(
5
,
block
.
getStatements
(
)
.
size
(
)
)
;
assertEquals
(
originalBlock
.
getStatement
(
0
)
,
block
.
getStatement
(
0
)
)
;
for
(
int
i
=
1
;
i
<
4
;
i
++
)
{
assertEquals
(
originalBlock
.
getStatement
(
i
)
,
block
.
getStatement
(
i
+
1
)
)
;
}
}
