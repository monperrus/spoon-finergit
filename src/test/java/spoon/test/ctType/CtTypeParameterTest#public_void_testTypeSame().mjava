@Test
public
void
testTypeSame
(
)
throws
Exception
{
CtClass
<
?
>
ctModel
=
(
CtClass
<
?
>
)
ModelUtils
.
buildClass
(
ErasureModelA
.
class
)
;
CtTypeParameter
tpA
=
ctModel
.
getFormalCtTypeParameters
(
)
.
get
(
0
)
;
CtTypeParameter
tpB
=
ctModel
.
getFormalCtTypeParameters
(
)
.
get
(
1
)
;
CtTypeParameter
tpC
=
ctModel
.
getFormalCtTypeParameters
(
)
.
get
(
2
)
;
CtTypeParameter
tpD
=
ctModel
.
getFormalCtTypeParameters
(
)
.
get
(
3
)
;
CtConstructor
<
?
>
ctModelCons
=
ctModel
.
getConstructors
(
)
.
iterator
(
)
.
next
(
)
;
CtMethod
<
?
>
ctModelMethod
=
ctModel
.
getMethodsByName
(
"method"
)
.
get
(
0
)
;
CtMethod
<
?
>
ctModelMethod2
=
ctModel
.
getMethodsByName
(
"method2"
)
.
get
(
0
)
;
CtClass
<
?
>
ctModelB
=
ctModel
.
filterChildren
(
new
NamedElementFilter
<
>
(
CtClass
.
class
,
"ModelB"
)
)
.
first
(
)
;
CtTypeParameter
tpA2
=
ctModelB
.
getFormalCtTypeParameters
(
)
.
get
(
0
)
;
CtTypeParameter
tpB2
=
ctModelB
.
getFormalCtTypeParameters
(
)
.
get
(
1
)
;
CtTypeParameter
tpC2
=
ctModelB
.
getFormalCtTypeParameters
(
)
.
get
(
2
)
;
CtTypeParameter
tpD2
=
ctModelB
.
getFormalCtTypeParameters
(
)
.
get
(
3
)
;
CtConstructor
<
?
>
ctModelBCons
=
ctModelB
.
getConstructors
(
)
.
iterator
(
)
.
next
(
)
;
CtMethod
<
?
>
ctModelBMethod
=
ctModelB
.
getMethodsByName
(
"method"
)
.
get
(
0
)
;
checkIsSame
(
ctModel
.
getFormalCtTypeParameters
(
)
,
ctModelB
.
getFormalCtTypeParameters
(
)
,
true
)
;
checkIsSame
(
ctModelCons
.
getFormalCtTypeParameters
(
)
,
ctModelBCons
.
getFormalCtTypeParameters
(
)
,
true
)
;
checkIsSame
(
ctModelMethod
.
getFormalCtTypeParameters
(
)
,
ctModelBMethod
.
getFormalCtTypeParameters
(
)
,
true
)
;
checkIsSame
(
ctModelCons
.
getFormalCtTypeParameters
(
)
,
ctModelBMethod
.
getFormalCtTypeParameters
(
)
,
false
)
;
checkIsSame
(
ctModelMethod
.
getFormalCtTypeParameters
(
)
,
ctModelMethod2
.
getFormalCtTypeParameters
(
)
,
true
)
;
CtClass
<
?
>
ctModelC
=
ctModel
.
filterChildren
(
new
NamedElementFilter
<
>
(
CtClass
.
class
,
"ModelC"
)
)
.
first
(
)
;
}
