@Test
public
void
testVisitorPartialEvaluator_binary
(
)
{
Launcher
launcher
=
new
Launcher
(
)
;
{
CtCodeElement
el
=
launcher
.
getFactory
(
)
.
Code
(
)
.
createCodeSnippetExpression
(
"0+1"
)
.
compile
(
)
;
VisitorPartialEvaluator
eval
=
new
VisitorPartialEvaluator
(
)
;
CtElement
elnew
=
eval
.
evaluate
(
el
)
;
assertEquals
(
"1"
,
elnew
.
toString
(
)
)
;
}
{
CtCodeElement
el
=
launcher
.
getFactory
(
)
.
Code
(
)
.
createCodeSnippetExpression
(
"(0+1)*3"
)
.
compile
(
)
;
VisitorPartialEvaluator
eval
=
new
VisitorPartialEvaluator
(
)
;
CtElement
elnew
=
eval
.
evaluate
(
el
)
;
assertEquals
(
"3"
,
elnew
.
toString
(
)
)
;
}
{
CtCodeElement
el
=
launcher
.
getFactory
(
)
.
Code
(
)
.
createCodeSnippetExpression
(
"(0+1)*3>0"
)
.
compile
(
)
;
VisitorPartialEvaluator
eval
=
new
VisitorPartialEvaluator
(
)
;
CtElement
elnew
=
eval
.
evaluate
(
el
)
;
assertEquals
(
"true"
,
elnew
.
toString
(
)
)
;
}
{
CtCodeElement
el
=
launcher
.
getFactory
(
)
.
Code
(
)
.
createCodeSnippetExpression
(
"(0+3-1)*3<=0"
)
.
compile
(
)
;
VisitorPartialEvaluator
eval
=
new
VisitorPartialEvaluator
(
)
;
CtElement
elnew
=
eval
.
evaluate
(
el
)
;
assertEquals
(
"false"
,
elnew
.
toString
(
)
)
;
}
}
