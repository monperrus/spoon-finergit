@Test
public
void
testShadowValueOf
(
)
{
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
addInputResource
(
"./src/test/java/spoon/test/executable/testclasses/WithEnum.java"
)
;
CtModel
ctModel
=
launcher
.
buildModel
(
)
;
List
<
CtExecutableReference
>
listValueOf
=
ctModel
.
filterChildren
(
new
TypeFilter
<
>
(
CtExecutableReference
.
class
)
)
.
filterChildren
(
(
Filter
<
CtExecutableReference
>
)
element
->
{
return
"valueOf"
.
equals
(
element
.
getSimpleName
(
)
)
;
}
)
.
list
(
)
;
assertEquals
(
1
,
listValueOf
.
size
(
)
)
;
CtExecutableReference
valueOf
=
listValueOf
.
get
(
0
)
;
Launcher
launcherShadow
=
new
Launcher
(
)
;
CtType
<
?
>
ctType
=
launcher
.
getFactory
(
)
.
Type
(
)
.
get
(
WithEnum
.
class
)
;
List
<
CtExecutableReference
>
listShadowValueOf
=
ctType
.
filterChildren
(
new
TypeFilter
<
>
(
CtExecutableReference
.
class
)
)
.
filterChildren
(
(
Filter
<
CtExecutableReference
>
)
element
->
{
return
"valueOf"
.
equals
(
element
.
getSimpleName
(
)
)
;
}
)
.
list
(
)
;
assertEquals
(
1
,
listShadowValueOf
.
size
(
)
)
;
CtExecutableReference
shadowValueOf
=
listShadowValueOf
.
get
(
0
)
;
assertEquals
(
valueOf
,
shadowValueOf
)
;
assertEquals
(
valueOf
.
getDeclaration
(
)
,
shadowValueOf
.
getDeclaration
(
)
)
;
MainTest
.
checkShadow
(
shadowValueOf
.
getParent
(
CtPackage
.
class
)
)
;
}
