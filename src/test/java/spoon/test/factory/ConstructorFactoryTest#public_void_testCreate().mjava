@Test
public
void
testCreate
(
)
throws
Exception
{
CtClass
<
?
>
type
=
build
(
"spoon.test"
,
"SampleClass"
)
;
Factory
factory
=
type
.
getFactory
(
)
;
ConstructorFactory
ctorf
=
factory
.
Constructor
(
)
;
CoreFactory
coref
=
factory
.
Core
(
)
;
Set
<
ModifierKind
>
mods
=
new
HashSet
<
ModifierKind
>
(
)
;
mods
.
add
(
ModifierKind
.
PUBLIC
)
;
List
<
CtParameter
<
?
>
>
params
=
new
ArrayList
<
CtParameter
<
?
>
>
(
)
;
CtParameter
<
?
>
param
=
coref
.
createParameter
(
)
;
CtTypeReference
<
?
>
tref
=
factory
.
Type
(
)
.
createReference
(
String
.
class
)
;
param
.
setType
(
(
CtTypeReference
)
tref
)
;
param
.
setSimpleName
(
"str"
)
;
params
.
add
(
param
)
;
Set
<
CtTypeReference
<
?
Throwable
>
>
thrownTypes
=
new
HashSet
<
CtTypeReference
<
?
Throwable
>
>
(
)
;
ctorf
.
create
(
type
,
mods
,
params
,
thrownTypes
)
;
CtConstructor
<
?
>
c
=
type
.
getConstructor
(
tref
)
;
Assert
.
assertEquals
(
1
,
c
.
getParameters
(
)
.
size
(
)
)
;
Assert
.
assertEquals
(
"str"
,
c
.
getParameters
(
)
.
get
(
0
)
.
getSimpleName
(
)
)
;
}
