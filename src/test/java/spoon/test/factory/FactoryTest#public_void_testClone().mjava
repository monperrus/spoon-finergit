@Test
public
void
testClone
(
)
throws
Exception
{
CtClass
<
?
>
type
=
build
(
"spoon.test.testclasses"
,
"SampleClass"
)
;
CtMethod
<
?
>
m
=
type
.
getMethodsByName
(
"method3"
)
.
get
(
0
)
;
int
i
=
m
.
getBody
(
)
.
getStatements
(
)
.
size
(
)
;
m
.
putMetadata
(
"metadata"
,
1
)
;
int
metadata
=
m
.
getAllMetadata
(
)
.
size
(
)
;
m
=
m
.
clone
(
)
;
assertEquals
(
i
,
m
.
getBody
(
)
.
getStatements
(
)
.
size
(
)
)
;
assertEquals
(
metadata
,
m
.
getAllMetadata
(
)
.
size
(
)
)
;
assertFalse
(
m
.
isParentInitialized
(
)
)
;
}
