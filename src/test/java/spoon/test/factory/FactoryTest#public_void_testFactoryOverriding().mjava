@Test
public
void
testFactoryOverriding
(
)
throws
Exception
{
class
MyCtMethod
extends
CtMethodImpl
<
T
>
{
}
;
@SuppressWarnings("serial")
CoreFactory
cf
=
new
DefaultCoreFactory
(
)
{
@Override
public
<
T
>
CtMethod
<
T
>
createMethod
(
)
{
return
new
MyCtMethod
<
T
>
(
)
;
}
}
;
Factory
myFactory
=
new
FactoryImpl
(
cf
,
new
StandardEnvironment
(
)
)
;
CtClass
<
?
>
type
=
TestUtils
.
build
(
"spoon.test"
,
"SampleClass"
,
myFactory
)
;
CtMethod
<
?
>
m
=
type
.
getMethodsByName
(
"method3"
)
.
get
(
0
)
;
Assert
.
assertTrue
(
m
instanceof
MyCtMethod
)
;
}
