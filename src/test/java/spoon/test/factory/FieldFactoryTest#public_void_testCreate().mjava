@Test
public
void
testCreate
(
)
throws
Exception
{
CtClass
<
?
>
type
=
build
(
"spoon.test"
,
"SampleClass"
)
;
FieldFactory
ff
=
type
.
getFactory
(
)
.
Field
(
)
;
TypeFactory
tf
=
type
.
getFactory
(
)
.
Type
(
)
;
Set
<
ModifierKind
>
mods
=
new
HashSet
<
ModifierKind
>
(
)
;
mods
.
add
(
ModifierKind
.
PRIVATE
)
;
CtTypeReference
<
?
>
tref
=
tf
.
createReference
(
String
.
class
)
;
ff
.
create
(
type
,
mods
,
tref
,
"name"
)
;
CtField
<
?
>
field
=
type
.
getField
(
"name"
)
;
Assert
.
assertEquals
(
"name"
,
field
.
getSimpleName
(
)
)
;
Assert
.
assertEquals
(
tref
,
field
.
getType
(
)
)
;
CtElement
parent
=
field
.
getParent
(
)
;
Assert
.
assertFalse
(
parent
.
isRootElement
(
)
)
;
Assert
.
assertTrue
(
parent
instanceof
CtClass
<
?
>
)
;
Assert
.
assertEquals
(
"SampleClass"
,
(
(
CtClass
<
?
>
)
parent
)
.
getSimpleName
(
)
)
;
}
