@Test
public
void
testFieldAccessAutoExplicit
(
)
throws
Exception
{
CtClass
mouse
=
(
CtClass
)
buildClass
(
Mouse
.
class
)
;
CtMethod
method
=
mouse
.
filterChildren
(
(
CtMethod
m
)
->
"meth1"
.
equals
(
m
.
getSimpleName
(
)
)
)
.
first
(
)
;
CtFieldReference
ageFR
=
method
.
filterChildren
(
(
CtFieldReference
fr
)
->
"age"
.
equals
(
fr
.
getSimpleName
(
)
)
)
.
first
(
)
;
assertEquals
(
"age"
,
ageFR
.
getParent
(
)
.
toString
(
)
)
;
method
.
getBody
(
)
.
insertBegin
(
(
CtStatement
)
mouse
.
getFactory
(
)
.
createCodeSnippetStatement
(
"int age = 1"
)
.
compile
(
)
)
;
new
ImportConflictDetector
(
)
.
process
(
mouse
.
getPosition
(
)
.
getCompilationUnit
(
)
)
;
assertEquals
(
"this.age"
,
ageFR
.
getParent
(
)
.
toString
(
)
)
;
}
