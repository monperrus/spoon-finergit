@SuppressWarnings({"rawtypes","unchecked"})
@Test
public
void
intersectionOfTwoFilters
(
)
throws
Exception
{
Factory
factory
=
build
(
"spoon.test"
,
"SampleClass"
)
.
getFactory
(
)
;
TypeFilter
<
CtMethod
>
statementFilter
=
new
TypeFilter
<
CtMethod
>
(
CtMethod
.
class
)
;
TypeFilter
<
CtMethodImpl
>
statementImplFilter
=
new
TypeFilter
<
CtMethodImpl
>
(
CtMethodImpl
.
class
)
;
CompositeFilter
compositeFilter
=
new
CompositeFilter
(
FilteringOperator
.
INTERSECTION
,
statementFilter
,
statementImplFilter
)
;
List
<
CtMethod
>
methodsWithInterfaceSuperclass
=
Query
.
getElements
(
factory
,
statementFilter
)
;
List
<
CtMethodImpl
>
methodWithConcreteClass
=
Query
.
getElements
(
factory
,
statementImplFilter
)
;
assertEquals
(
methodsWithInterfaceSuperclass
.
size
(
)
,
methodWithConcreteClass
.
size
(
)
)
;
assertEquals
(
methodsWithInterfaceSuperclass
,
methodWithConcreteClass
)
;
List
intersection
=
Query
.
getElements
(
factory
,
compositeFilter
)
;
assertEquals
(
methodsWithInterfaceSuperclass
.
size
(
)
,
intersection
.
size
(
)
)
;
assertEquals
(
methodsWithInterfaceSuperclass
,
intersection
)
;
}
