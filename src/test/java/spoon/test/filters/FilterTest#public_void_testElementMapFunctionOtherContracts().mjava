@Test
public
void
testElementMapFunctionOtherContracts
(
)
throws
Exception
{
final
Launcher
launcher
=
new
Launcher
(
)
;
CtQuery
q
=
launcher
.
getFactory
(
)
.
Query
(
)
.
createQuery
(
)
.
map
(
(
String
s
)
->
new
String
[
]
{
"a"
,
null
,
s
}
)
;
List
<
String
>
list
=
q
.
setInput
(
null
)
.
list
(
)
;
assertEquals
(
0
,
list
.
size
(
)
)
;
list
=
q
.
setInput
(
"c"
)
.
list
(
)
;
assertEquals
(
2
,
list
.
size
(
)
)
;
assertEquals
(
"a"
,
list
.
get
(
0
)
)
;
assertEquals
(
"c"
,
list
.
get
(
1
)
)
;
list
=
q
.
list
(
)
;
assertEquals
(
2
,
list
.
size
(
)
)
;
assertEquals
(
"a"
,
list
.
get
(
0
)
)
;
assertEquals
(
"c"
,
list
.
get
(
1
)
)
;
CtQuery
q2
=
launcher
.
getFactory
(
)
.
Query
(
)
.
createQuery
(
)
.
map
(
(
String
s
)
->
{
throw
new
AssertionError
(
)
;
}
)
;
assertEquals
(
0
,
q2
.
setInput
(
null
)
.
list
(
)
.
size
(
)
)
;
}
