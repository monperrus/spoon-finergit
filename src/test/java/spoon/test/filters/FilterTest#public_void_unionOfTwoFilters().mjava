@SuppressWarnings({"rawtypes","unchecked"})
@Test
public
void
unionOfTwoFilters
(
)
throws
Exception
{
Factory
factory
=
build
(
"spoon.test"
,
"SampleClass"
)
.
getFactory
(
)
;
TypeFilter
<
CtNewClass
>
newClassFilter
=
new
TypeFilter
<
CtNewClass
>
(
CtNewClass
.
class
)
;
TypeFilter
<
CtMethod
>
methodFilter
=
new
TypeFilter
<
CtMethod
>
(
CtMethod
.
class
)
;
CompositeFilter
compositeFilter
=
new
CompositeFilter
(
FilteringOperator
.
UNION
,
methodFilter
,
newClassFilter
)
;
List
filteredWithCompositeFilter
=
Query
.
getElements
(
factory
,
compositeFilter
)
;
List
<
CtMethod
>
methods
=
Query
.
getElements
(
factory
,
methodFilter
)
;
List
<
CtNewClass
>
newClasses
=
Query
.
getElements
(
factory
,
newClassFilter
)
;
List
<
CtElement
>
union
=
new
ArrayList
<
CtElement
>
(
)
;
union
.
addAll
(
methods
)
;
union
.
addAll
(
newClasses
)
;
assertEquals
(
methods
.
size
(
)
+
newClasses
.
size
(
)
,
union
.
size
(
)
)
;
assertEquals
(
union
.
size
(
)
,
filteredWithCompositeFilter
.
size
(
)
)
;
assertTrue
(
filteredWithCompositeFilter
.
containsAll
(
union
)
)
;
}
