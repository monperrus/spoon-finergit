@Test
public
void
testDiamond
(
)
{
Factory
factory
=
new
Factory
(
new
DefaultCoreFactory
(
)
,
new
StandardEnvironment
(
)
)
;
CtClass
clazz
=
(
CtClass
)
factory
.
Code
(
)
.
createCodeSnippetStatement
(
"class Diamond {\n"
+
"	java.util.List<String> f = new java.util.ArrayList<>();\n"
+
"}"
)
.
compile
(
)
;
CtField
f
=
(
CtField
)
clazz
.
getFields
(
)
.
toArray
(
)
[
0
]
;
CtNewClass
val
=
(
CtNewClass
)
f
.
getDefaultExpression
(
)
;
assertEquals
(
"java.lang.String"
,
val
.
getType
(
)
.
getActualTypeArguments
(
)
.
get
(
0
)
.
toString
(
)
)
;
assertEquals
(
"new java.util.ArrayList<java.lang.String>()"
,
val
.
toString
(
)
)
;
}
