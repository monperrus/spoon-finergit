@Test
public
void
testDiamond1
(
)
{
Factory
factory
=
new
Factory
(
new
DefaultCoreFactory
(
)
,
new
StandardEnvironment
(
)
)
;
CtClass
<
?
>
clazz
=
(
CtClass
<
?
>
)
factory
.
Code
(
)
.
createCodeSnippetStatement
(
"class Diamond {\n"
+
"	java.util.List<String> f = new java.util.ArrayList<>();\n"
+
"}"
)
.
compile
(
)
;
CtField
<
?
>
f
=
clazz
.
getFields
(
)
.
get
(
0
)
;
CtNewClass
<
?
>
val
=
f
.
getDefaultExpression
(
)
;
assertEquals
(
"java.lang.String"
,
val
.
getType
(
)
.
getActualTypeArguments
(
)
.
get
(
0
)
.
toString
(
)
)
;
assertEquals
(
"new java.util.ArrayList<java.lang.String>()"
,
val
.
toString
(
)
)
;
}
