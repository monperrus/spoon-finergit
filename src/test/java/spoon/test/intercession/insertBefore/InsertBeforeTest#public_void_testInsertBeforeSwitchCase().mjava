@Test
public
void
testInsertBeforeSwitchCase
(
)
throws
Exception
{
CtClass
<
?
>
foo
=
factory
.
Package
(
)
.
get
(
"spoon.test.intercession.insertBefore"
)
.
getType
(
"InsertBeforeExample"
)
;
{
CtMethod
<
?
>
sm
=
foo
.
getElements
(
new
NameFilter
<
CtMethod
<
?
>
>
(
"switchMethod"
)
)
.
get
(
0
)
;
CtCase
caseElem
=
factory
.
Core
(
)
.
createCase
(
)
;
CtLiteral
<
Object
>
literal
=
factory
.
Core
(
)
.
createLiteral
(
)
;
literal
.
setValue
(
1
)
;
caseElem
.
setCaseExpression
(
literal
)
;
CtSwitch
<
?
>
sw
=
sm
.
getElements
(
new
TypeFilter
<
CtSwitch
<
?
>
>
(
CtSwitch
.
class
)
)
.
get
(
0
)
;
CtCase
<
?
>
ctCase1
=
(
CtCase
<
?
>
)
sw
.
getCases
(
)
.
get
(
2
)
;
CtCase
<
?
>
ctCase2
=
(
CtCase
<
?
>
)
sw
.
getCases
(
)
.
get
(
3
)
;
CtCodeSnippetStatement
snippet
=
factory
.
Code
(
)
.
createCodeSnippetStatement
(
"System.out.println(\"foo\")"
)
;
ctCase1
.
getStatements
(
)
.
get
(
0
)
.
insertBefore
(
snippet
)
;
ctCase2
.
getStatements
(
)
.
get
(
1
)
.
insertBefore
(
snippet
)
;
assertEquals
(
snippet
,
ctCase1
.
getStatements
(
)
.
get
(
0
)
)
;
assertEquals
(
snippet
,
ctCase2
.
getStatements
(
)
.
get
(
1
)
)
;
CtCase
<
?
>
ctCase
=
(
CtCase
<
?
>
)
sw
.
getCases
(
)
.
get
(
1
)
;
CtStatement
stmt
=
caseElem
;
ctCase
.
insertBefore
(
stmt
)
;
assertEquals
(
5
,
sw
.
getCases
(
)
.
size
(
)
)
;
assertEquals
(
caseElem
,
sw
.
getCases
(
)
.
get
(
1
)
)
;
assertEquals
(
ctCase
,
sw
.
getCases
(
)
.
get
(
2
)
)
;
}
}
