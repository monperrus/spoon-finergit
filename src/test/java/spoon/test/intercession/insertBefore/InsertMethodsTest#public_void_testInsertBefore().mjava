@Test
public
void
testInsertBefore
(
)
{
CtMethod
<
Void
>
foo
=
(
CtMethod
<
Void
>
)
assignmentClass
.
getMethods
(
)
.
toArray
(
)
[
0
]
;
CtBlock
<
?
>
body
=
foo
.
getBody
(
)
;
assertEquals
(
3
,
body
.
getStatements
(
)
.
size
(
)
)
;
CtStatement
s
=
body
.
getStatements
(
)
.
get
(
2
)
;
assertEquals
(
"int z = x + y"
,
s
.
toString
(
)
)
;
CtCodeSnippetStatement
stmt
=
factory
.
Core
(
)
.
createCodeSnippetStatement
(
)
;
stmt
.
setValue
(
"System.out.println(x);"
)
;
s
.
insertBefore
(
stmt
)
;
assertEquals
(
4
,
body
.
getStatements
(
)
.
size
(
)
)
;
assertSame
(
stmt
,
body
.
getStatements
(
)
.
get
(
2
)
)
;
assertEquals
(
s
.
getParent
(
)
,
stmt
.
getParent
(
)
)
;
}
