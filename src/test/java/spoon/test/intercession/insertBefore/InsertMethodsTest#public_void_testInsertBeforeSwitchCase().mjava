@Test
public
void
testInsertBeforeSwitchCase
(
)
throws
Exception
{
CtMethod
<
?
>
sm
=
insertExampleClass
.
getElements
(
new
NameFilter
<
CtMethod
<
?
>
>
(
"switchMethod"
)
)
.
get
(
0
)
;
CtSwitch
<
?
>
sw
=
sm
.
getElements
(
new
TypeFilter
<
CtSwitch
<
?
>
>
(
CtSwitch
.
class
)
)
.
get
(
0
)
;
CtCase
<
?
>
ctCase1
=
sw
.
getCases
(
)
.
get
(
2
)
;
CtCase
<
?
>
ctCase2
=
sw
.
getCases
(
)
.
get
(
3
)
;
CtCodeSnippetStatement
snippet
=
factory
.
Code
(
)
.
createCodeSnippetStatement
(
"System.out.println(\"foo\")"
)
;
ctCase1
.
getStatements
(
)
.
get
(
0
)
.
insertBefore
(
snippet
)
;
assertEquals
(
snippet
,
ctCase1
.
getStatements
(
)
.
get
(
0
)
)
;
assertEquals
(
ctCase1
,
snippet
.
getParent
(
)
)
;
CtCodeSnippetStatement
snippet2
=
factory
.
Core
(
)
.
clone
(
snippet
)
;
ctCase2
.
getStatements
(
)
.
get
(
1
)
.
insertBefore
(
snippet2
)
;
assertEquals
(
snippet2
,
ctCase2
.
getStatements
(
)
.
get
(
1
)
)
;
assertEquals
(
ctCase2
,
snippet2
.
getParent
(
)
)
;
CtCase
<
Object
>
caseElem
=
factory
.
Core
(
)
.
createCase
(
)
;
CtLiteral
<
Object
>
literal
=
factory
.
Core
(
)
.
createLiteral
(
)
;
literal
.
setValue
(
1
)
;
caseElem
.
setCaseExpression
(
literal
)
;
CtCase
<
?
>
ctCase
=
sw
.
getCases
(
)
.
get
(
1
)
;
ctCase
.
insertBefore
(
(
CtStatement
)
caseElem
)
;
assertEquals
(
5
,
sw
.
getCases
(
)
.
size
(
)
)
;
assertEquals
(
caseElem
,
sw
.
getCases
(
)
.
get
(
1
)
)
;
assertEquals
(
ctCase
,
sw
.
getCases
(
)
.
get
(
2
)
)
;
assertEquals
(
sw
,
caseElem
.
getParent
(
)
)
;
}
