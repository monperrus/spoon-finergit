@Test
public
void
testFieldAccessInLambdaNoClassPath
(
)
{
final
Launcher
runLaunch
=
new
Launcher
(
)
;
runLaunch
.
getEnvironment
(
)
.
setNoClasspath
(
true
)
;
runLaunch
.
addInputResource
(
"./src/test/resources/noclasspath/lambdas/FieldAccessInLambda.java"
)
;
runLaunch
.
addInputResource
(
"./src/test/resources/noclasspath/lambdas/imported/SeparateInterfaceWithField.java"
)
;
runLaunch
.
buildModel
(
)
;
final
List
<
CtFieldAccess
>
fieldAccesses
=
runLaunch
.
getModel
(
)
.
getElements
(
new
Filter
<
CtFieldAccess
>
(
)
{
@Override
public
boolean
matches
(
final
CtFieldAccess
element
)
{
final
String
name
=
element
.
getVariable
(
)
.
getSimpleName
(
)
;
return
name
.
equals
(
"localField"
)
||
name
.
equals
(
"pathSeparator"
)
||
name
.
equals
(
"fieldInSeparateInterface"
)
||
name
.
equals
(
"fieldInClassBase"
)
||
name
.
equals
(
"fieldInClass"
)
||
name
.
equals
(
"fieldInInterfaceBase"
)
||
name
.
equals
(
"fieldInInterface"
)
||
name
.
equals
(
"iAmToLazyForAnotherFieldName"
)
;
}
}
)
;
assertEquals
(
8
,
fieldAccesses
.
size
(
)
)
;
}
