@Test
public
void
testAllLevelsForLogs
(
)
throws
Exception
{
final
Launcher
launcher
=
new
Launcher
(
)
;
Logger
logger
=
mock
(
Logger
.
class
)
;
FieldUtils
.
writeField
(
launcher
.
getEnvironment
(
)
,
"logger"
,
logger
,
true
)
;
ArgumentCaptor
<
String
>
valueCaptureMessage
=
ArgumentCaptor
.
forClass
(
String
.
class
)
;
ArgumentCaptor
<
Level
>
valueCaptureLevel
=
ArgumentCaptor
.
forClass
(
Level
.
class
)
;
doNothing
(
)
.
when
(
logger
)
.
log
(
valueCaptureLevel
.
capture
(
)
,
valueCaptureMessage
.
capture
(
)
)
;
launcher
.
setArgs
(
new
String
[
]
{
"-i"
,
"./src/test/java/spoon/test/logging"
,
"--level"
,
level
.
toString
(
)
}
)
;
launcher
.
getEnvironment
(
)
.
debugMessage
(
"debugMessage"
)
;
launcher
.
getEnvironment
(
)
.
reportProgressMessage
(
"reportProgressMessage"
)
;
assertEquals
(
level
,
launcher
.
getFactory
(
)
.
getEnvironment
(
)
.
getLevel
(
)
)
;
assertTrue
(
valueCaptureMessage
.
getAllValues
(
)
.
size
(
)
>=
nbLogMessagesMinimum
)
;
}
