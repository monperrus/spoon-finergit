/** 
 * load model once into static variable and use it for more read-only tests
 */
@BeforeClass
public
static
void
loadModel
(
)
{
StringBuilder
classpath
=
new
StringBuilder
(
)
;
for
(
String
classpathEntry
:
System
.
getProperty
(
"java.class.path"
)
.
split
(
File
.
pathSeparator
)
)
{
if
(
!
classpathEntry
.
contains
(
"test-classes"
)
)
{
classpath
.
append
(
classpathEntry
)
;
classpath
.
append
(
File
.
pathSeparator
)
;
}
}
String
systemClassPath
=
classpath
.
substring
(
0
,
classpath
.
length
(
)
-
1
)
;
launcher
=
new
Launcher
(
)
;
launcher
.
setArgs
(
new
String
[
]
{
"-i"
,
"src/main/java"
,
"-o"
,
"target/spooned"
,
"--destination"
,
"target/spooned-build"
,
"--source-classpath"
,
systemClassPath
,
"--compile"
,
"--compliance"
,
"8"
,
"--level"
,
"OFF"
}
)
;
launcher
.
buildModel
(
)
;
rootPackage
=
launcher
.
getFactory
(
)
.
Package
(
)
.
getRootPackage
(
)
;
}
