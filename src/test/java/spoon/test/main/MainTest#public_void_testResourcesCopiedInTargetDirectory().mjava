@Test
public
void
testResourcesCopiedInTargetDirectory
(
)
{
StringBuilder
classpath
=
new
StringBuilder
(
)
;
for
(
String
classpathEntry
:
System
.
getProperty
(
"java.class.path"
)
.
split
(
File
.
pathSeparator
)
)
{
if
(
!
classpathEntry
.
contains
(
"test-classes"
)
)
{
classpath
.
append
(
classpathEntry
)
;
classpath
.
append
(
File
.
pathSeparator
)
;
}
}
String
systemClassPath
=
classpath
.
substring
(
0
,
classpath
.
length
(
)
-
1
)
;
spoon
.
Launcher
.
main
(
new
String
[
]
{
"-i"
,
"src/test/resources/no-copy-resources/"
,
"-o"
,
"target/spooned-with-resources"
,
"--destination"
,
"target/spooned-build"
,
"--source-classpath"
,
systemClassPath
,
"--compile"
}
)
;
assertTrue
(
new
File
(
"src/test/resources/no-copy-resources/package.html"
)
.
exists
(
)
)
;
assertTrue
(
new
File
(
"target/spooned-with-resources/package.html"
)
.
exists
(
)
)
;
assertTrue
(
new
File
(
"src/test/resources/no-copy-resources/fr/package.html"
)
.
exists
(
)
)
;
assertTrue
(
new
File
(
"target/spooned-with-resources/fr/package.html"
)
.
exists
(
)
)
;
assertTrue
(
new
File
(
"src/test/resources/no-copy-resources/fr/inria/package.html"
)
.
exists
(
)
)
;
assertTrue
(
new
File
(
"target/spooned-with-resources/fr/inria/package.html"
)
.
exists
(
)
)
;
}
