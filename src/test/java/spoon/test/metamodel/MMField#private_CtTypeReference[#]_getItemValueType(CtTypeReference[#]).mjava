private
static
CtTypeReference
<
?
>
getItemValueType
(
CtTypeReference
<
?
>
valueType
)
{
MMContainerType
valueContainerType
=
MMContainerType
.
valueOf
(
valueType
.
getActualClass
(
)
)
;
if
(
valueContainerType
==
MMContainerType
.
SINGLE
)
{
return
null
;
}
CtTypeReference
<
?
>
itemValueType
;
if
(
valueContainerType
==
MMContainerType
.
MAP
)
{
if
(
String
.
class
.
getName
(
)
.
equals
(
valueType
.
getActualTypeArguments
(
)
.
get
(
0
)
.
getQualifiedName
(
)
)
==
false
)
{
throw
new
SpoonException
(
"Unexpected container of type: "
+
valueType
.
toString
(
)
)
;
}
itemValueType
=
valueType
.
getActualTypeArguments
(
)
.
get
(
1
)
;
}
else
{
itemValueType
=
valueType
.
getActualTypeArguments
(
)
.
get
(
0
)
;
}
if
(
itemValueType
instanceof
CtTypeParameterReference
)
{
itemValueType
=
(
(
CtTypeParameterReference
)
itemValueType
)
.
getBoundingType
(
)
;
if
(
itemValueType
==
null
)
{
itemValueType
=
valueType
.
getFactory
(
)
.
Type
(
)
.
OBJECT
;
}
}
return
itemValueType
;
}
