@Test
public
void
testGetGenericMethodFromReference
(
)
throws
Exception
{
CtType
<
?
>
classCloud
=
ModelUtils
.
buildClass
(
Cloud
.
class
)
;
CtMethod
<
?
>
ctMethod
=
classCloud
.
getMethodsByName
(
"method"
)
.
get
(
0
)
;
CtExecutableReference
<
?
>
execRef
=
ctMethod
.
getReference
(
)
;
Method
method
=
execRef
.
getActualMethod
(
)
;
assertNotNull
(
method
)
;
assertEquals
(
"method"
,
method
.
getName
(
)
)
;
CtClass
<
?
>
classSun
=
classCloud
.
getFactory
(
)
.
Class
(
)
.
get
(
"spoon.test.methodreference.testclasses.Sun"
)
;
CtExecutableReference
<
?
>
execRef2
=
classSun
.
filterChildren
(
new
TypeFilter
<
>
(
CtInvocation
.
class
)
)
.
select
(
(
(
CtInvocation
i
)
->
"method"
.
equals
(
i
.
getExecutable
(
)
.
getSimpleName
(
)
)
)
)
.
map
(
(
CtInvocation
i
)
->
i
.
getExecutable
(
)
)
.
first
(
)
;
assertNotNull
(
execRef2
)
;
Method
method2
=
execRef2
.
getActualMethod
(
)
;
assertNotNull
(
method2
)
;
assertEquals
(
"method"
,
method2
.
getName
(
)
)
;
}
