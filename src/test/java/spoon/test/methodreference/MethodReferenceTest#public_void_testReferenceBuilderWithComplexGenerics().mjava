@Test
public
void
testReferenceBuilderWithComplexGenerics
(
)
throws
Exception
{
CtType
<
?
>
classCloud
=
ModelUtils
.
buildClass
(
AssertJ
.
class
)
;
List
<
CtMethod
<
?
>
>
methods
=
classCloud
.
getMethodsByName
(
"assertThat"
)
;
assertThat
(
methods
.
size
(
)
,
is
(
1
)
)
;
CtMethod
method1
=
methods
.
get
(
0
)
;
CtExecutableReference
<
?
>
execRef
=
method1
.
getReference
(
)
;
Method
method
=
execRef
.
getActualMethod
(
)
;
assertNotNull
(
method
)
;
assertEquals
(
"assertThat"
,
method
.
getName
(
)
)
;
List
<
CtParameter
<
?
>
>
parameters
=
method1
.
getParameters
(
)
;
assertThat
(
parameters
.
size
(
)
,
is
(
1
)
)
;
CtTypeReference
<
?
>
paramTypeRef
=
parameters
.
get
(
0
)
.
getType
(
)
;
Class
<
?
>
paramClass
=
paramTypeRef
.
getTypeErasure
(
)
.
getActualClass
(
)
;
assertSame
(
paramClass
,
method
.
getParameterTypes
(
)
[
0
]
)
;
assertSame
(
method1
,
execRef
.
getDeclaration
(
)
)
;
}
