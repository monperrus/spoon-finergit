@Test
public
void
testIterationStatements
(
)
{
Factory
factory
=
TestUtils
.
createFactory
(
)
;
CtClass
<
?
>
clazz
=
factory
.
Code
(
)
.
createCodeSnippetStatement
(
""
+
"class X {"
+
"public void foo() {"
+
" int x=0;"
+
"switch(x) {"
+
"case 0: x=x+1;break;"
+
"case 1: x=0;"
+
"default: x=-1;"
+
"}"
+
"}};"
)
.
compile
(
)
;
CtMethod
<
?
>
foo
=
(
CtMethod
<
?
>
)
clazz
.
getMethods
(
)
.
toArray
(
)
[
0
]
;
CtSwitch
sw
=
foo
.
getElements
(
new
TypeFilter
<
CtSwitch
>
(
CtSwitch
.
class
)
)
.
get
(
0
)
;
assertEquals
(
3
,
sw
.
getCases
(
)
.
size
(
)
)
;
CtCase
<
?
>
c
=
(
CtCase
)
sw
.
getCases
(
)
.
get
(
0
)
;
assertEquals
(
0
,
(
(
CtLiteral
)
c
.
getCaseExpression
(
)
)
.
getValue
(
)
)
;
assertEquals
(
2
,
c
.
getStatements
(
)
.
size
(
)
)
;
List
l
=
new
ArrayList
(
)
;
for
(
CtStatement
s
:
c
)
{
l
.
add
(
s
)
;
}
assertTrue
(
c
.
getStatements
(
)
.
equals
(
l
)
)
;
}
