@Test
public
void
testJava12BreakExpression
(
)
{
String
code
=
"class A { public void f(String s) { int result = switch (s) { case \"Foo\": break 1; case \"Bar\": break 2; default: break 0; }; }"
;
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
getEnvironment
(
)
.
setComplianceLevel
(
12
)
;
launcher
.
getEnvironment
(
)
.
setPreviewFeaturesEnabled
(
true
)
;
launcher
.
getEnvironment
(
)
.
setNoClasspath
(
true
)
;
launcher
.
addInputResource
(
new
VirtualFile
(
code
)
)
;
CtModel
model
=
launcher
.
buildModel
(
)
;
List
<
CtBreak
>
breaks
=
model
.
getElements
(
new
TypeFilter
<
>
(
CtBreak
.
class
)
)
;
assertEquals
(
"1"
,
breaks
.
get
(
0
)
.
getExpression
(
)
.
toString
(
)
)
;
assertEquals
(
"break 1"
,
breaks
.
get
(
0
)
.
toString
(
)
)
;
assertNull
(
breaks
.
get
(
0
)
.
getLabel
(
)
)
;
assertEquals
(
"2"
,
breaks
.
get
(
1
)
.
getExpression
(
)
.
toString
(
)
)
;
assertNull
(
breaks
.
get
(
1
)
.
getLabel
(
)
)
;
assertEquals
(
"break 2"
,
breaks
.
get
(
1
)
.
toString
(
)
)
;
assertEquals
(
"0"
,
breaks
.
get
(
2
)
.
getExpression
(
)
.
toString
(
)
)
;
assertNull
(
breaks
.
get
(
2
)
.
getLabel
(
)
)
;
assertEquals
(
"break 0"
,
breaks
.
get
(
2
)
.
toString
(
)
)
;
}
