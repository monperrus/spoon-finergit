@Test
public
void
testJava12SwitchExpression
(
)
{
String
code
=
"class A { public void f(int i) { int x = switch(i) { case 1 -> 10; case 2 -> 20; default -> 30; }; } }"
;
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
getEnvironment
(
)
.
setComplianceLevel
(
12
)
;
launcher
.
getEnvironment
(
)
.
setPreviewFeaturesEnabled
(
true
)
;
launcher
.
getEnvironment
(
)
.
setNoClasspath
(
true
)
;
launcher
.
addInputResource
(
new
VirtualFile
(
code
)
)
;
CtModel
model
=
launcher
.
buildModel
(
)
;
CtLocalVariable
localVariable
=
model
.
getElements
(
new
TypeFilter
<
>
(
CtLocalVariable
.
class
)
)
.
get
(
0
)
;
assertTrue
(
localVariable
.
getAssignment
(
)
instanceof
CtSwitchExpression
)
;
assertEquals
(
"int x = switch (i) {    case 1 ->        10;    case 2 ->        20;    default ->        30;}"
,
toSingleLineString
(
localVariable
)
)
;
}
