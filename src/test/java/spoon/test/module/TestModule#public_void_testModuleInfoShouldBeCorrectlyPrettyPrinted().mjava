@Test
public
void
testModuleInfoShouldBeCorrectlyPrettyPrinted
(
)
throws
IOException
{
File
input
=
new
File
(
"./src/test/resources/spoon/test/module/simple_module/module-info.java"
)
;
File
output
=
new
File
(
"./target/spoon-module"
)
;
final
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
getEnvironment
(
)
.
setNoClasspath
(
true
)
;
launcher
.
getEnvironment
(
)
.
setComplianceLevel
(
9
)
;
launcher
.
setSourceOutputDirectory
(
output
.
getPath
(
)
)
;
launcher
.
addInputResource
(
input
.
getPath
(
)
)
;
launcher
.
run
(
)
;
assertEquals
(
2
,
launcher
.
getModel
(
)
.
getAllModules
(
)
.
size
(
)
)
;
try
(
Stream
<
Path
>
files
=
Files
.
list
(
output
.
toPath
(
)
)
)
{
assertEquals
(
2
,
files
.
count
(
)
)
;
}
File
fileOuput
=
new
File
(
output
,
"simple_module/module-info.java"
)
;
List
<
String
>
originalLines
=
Files
.
readAllLines
(
input
.
toPath
(
)
)
;
List
<
String
>
createdLines
=
Files
.
readAllLines
(
fileOuput
.
toPath
(
)
)
;
assertEquals
(
originalLines
.
size
(
)
,
createdLines
.
size
(
)
)
;
for
(
int
i
=
0
;
i
<
originalLines
.
size
(
)
;
i
++
)
{
assertEquals
(
originalLines
.
get
(
i
)
,
createdLines
.
get
(
i
)
)
;
}
}
