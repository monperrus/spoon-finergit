@Test
public
void
testSimpleModuleCanBeBuilt
(
)
{
checkJavaVersion
(
)
;
final
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
getEnvironment
(
)
.
setComplianceLevel
(
9
)
;
launcher
.
getEnvironment
(
)
.
setNoClasspath
(
false
)
;
launcher
.
addInputResource
(
"./src/test/resources/spoon/test/module/simple_module_with_code"
)
;
launcher
.
run
(
)
;
CtModel
model
=
launcher
.
getModel
(
)
;
assertEquals
(
2
,
model
.
getAllModules
(
)
.
size
(
)
)
;
assertEquals
(
1
,
model
.
getAllTypes
(
)
.
size
(
)
)
;
CtClass
simpleClass
=
model
.
getElements
(
new
TypeFilter
<
>
(
CtClass
.
class
)
)
.
get
(
0
)
;
assertEquals
(
"SimpleClass"
,
simpleClass
.
getSimpleName
(
)
)
;
CtModule
simpleModule
=
model
.
getElements
(
new
NamedElementFilter
<
>
(
CtModule
.
class
,
"simple_module_with_code"
)
)
.
get
(
0
)
;
assertNotNull
(
simpleModule
)
;
assertEquals
(
"simple_module_with_code"
,
simpleModule
.
getSimpleName
(
)
)
;
CtModule
module
=
simpleClass
.
getParent
(
CtModule
.
class
)
;
assertNotNull
(
module
)
;
assertSame
(
simpleModule
,
module
)
;
}
