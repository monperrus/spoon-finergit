@Test
public
void
testParentSet
(
)
throws
Exception
{
CtClass
<
?
>
foo
=
factory
.
Package
(
)
.
get
(
"spoon.test.parent"
)
.
getType
(
"Foo"
)
;
CtMethod
<
?
>
fooMethod
=
foo
.
getMethodsByName
(
"foo"
)
.
get
(
0
)
;
assertEquals
(
"foo"
,
fooMethod
.
getSimpleName
(
)
)
;
CtLocalVariable
<
?
>
localVar
=
(
CtLocalVariable
<
?
>
)
fooMethod
.
getBody
(
)
.
getStatements
(
)
.
get
(
0
)
;
CtAssignment
<
?
,
?
>
assignment
=
(
CtAssignment
<
?
,
?
>
)
fooMethod
.
getBody
(
)
.
getStatements
(
)
.
get
(
1
)
;
CtLiteral
<
?
>
newLit
=
factory
.
Code
(
)
.
createLiteral
(
0
)
;
localVar
.
setDefaultExpression
(
(
CtExpression
)
newLit
)
;
assertEquals
(
localVar
,
newLit
.
getParent
(
)
)
;
CtLiteral
<
?
>
newLit2
=
factory
.
Code
(
)
.
createLiteral
(
1
)
;
assignment
.
setAssignment
(
(
CtExpression
)
newLit2
)
;
assertEquals
(
assignment
,
newLit2
.
getParent
(
)
)
;
}
