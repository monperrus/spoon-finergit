@Test
public
void
testAnnotationOnPackage
(
)
throws
Exception
{
Launcher
launcher
=
new
Launcher
(
)
;
Factory
factory
=
launcher
.
createFactory
(
)
;
factory
.
getEnvironment
(
)
.
setDefaultFileGenerator
(
launcher
.
createOutputWriter
(
new
File
(
"./target/spooned/"
)
,
factory
.
getEnvironment
(
)
)
)
;
factory
.
getEnvironment
(
)
.
setAutoImports
(
false
)
;
SpoonCompiler
compiler
=
launcher
.
createCompiler
(
factory
)
;
compiler
.
addInputSource
(
new
File
(
"./src/test/java/spoon/test/pkg/testclasses/"
)
)
;
compiler
.
setSourceOutputDirectory
(
new
File
(
"./target/spooned/"
)
)
;
compiler
.
build
(
)
;
compiler
.
generateProcessedSourceFiles
(
OutputType
.
CLASSES
)
;
final
SpoonCompiler
newCompiler
=
launcher
.
createCompiler
(
launcher
.
createFactory
(
)
)
;
newCompiler
.
addInputSource
(
new
File
(
"./target/spooned/spoon/test/pkg/testclasses/"
)
)
;
try
{
assertTrue
(
newCompiler
.
build
(
)
)
;
}
catch
(
Exception
ignore
)
{
fail
(
)
;
}
}
