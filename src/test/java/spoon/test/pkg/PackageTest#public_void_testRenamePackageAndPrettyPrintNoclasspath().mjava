@Test
public
void
testRenamePackageAndPrettyPrintNoclasspath
(
)
{
final
Launcher
spoon
=
new
Launcher
(
)
;
spoon
.
addInputResource
(
"./src/test/resources/noclasspath/app/Test.java"
)
;
spoon
.
getEnvironment
(
)
.
setNoClasspath
(
true
)
;
spoon
.
buildModel
(
)
;
CtPackage
ctPackage
=
spoon
.
getModel
(
)
.
getElements
(
new
NamedElementFilter
<
>
(
CtPackage
.
class
,
"app"
)
)
.
get
(
0
)
;
ctPackage
.
setSimpleName
(
"otherName"
)
;
CtClass
foo
=
spoon
.
getModel
(
)
.
getElements
(
new
NamedElementFilter
<
>
(
CtClass
.
class
,
"Test"
)
)
.
get
(
0
)
;
assertEquals
(
"otherName.Test"
,
foo
.
getQualifiedName
(
)
)
;
PrettyPrinter
prettyPrinter
=
new
DefaultJavaPrettyPrinter
(
spoon
.
getEnvironment
(
)
)
;
prettyPrinter
.
calculate
(
spoon
.
getFactory
(
)
.
CompilationUnit
(
)
.
getOrCreate
(
"./src/test/resources/noclasspath/app/Test.java"
)
,
Collections
.
singletonList
(
foo
)
)
;
String
result
=
prettyPrinter
.
getResult
(
)
;
assertTrue
(
result
.
contains
(
"package otherName;"
)
)
;
}
