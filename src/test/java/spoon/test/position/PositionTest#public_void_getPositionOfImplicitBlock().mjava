@Test
public
void
getPositionOfImplicitBlock
(
)
{
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
addInputResource
(
"./src/test/java/spoon/test/position/testclasses/ImplicitBlock.java"
)
;
launcher
.
buildModel
(
)
;
CtIf
ifElement
=
launcher
.
getModel
(
)
.
getElements
(
new
TypeFilter
<
>
(
CtIf
.
class
)
)
.
get
(
0
)
;
CtStatement
thenStatement
=
ifElement
.
getThenStatement
(
)
;
assertTrue
(
thenStatement
instanceof
CtBlock
)
;
CtBlock
thenBlock
=
(
CtBlock
)
thenStatement
;
SourcePosition
positionThen
=
thenBlock
.
getPosition
(
)
;
CtStatement
returnStatement
=
thenBlock
.
getStatement
(
0
)
;
assertEquals
(
returnStatement
.
getPosition
(
)
,
positionThen
)
;
assertEquals
(
"ImplicitBlock.java"
,
positionThen
.
getFile
(
)
.
getName
(
)
)
;
assertEquals
(
7
,
positionThen
.
getLine
(
)
)
;
CtStatement
elseStatement
=
ifElement
.
getElseStatement
(
)
;
assertTrue
(
elseStatement
instanceof
CtBlock
)
;
CtBlock
elseBlock
=
(
CtBlock
)
elseStatement
;
SourcePosition
positionElse
=
elseBlock
.
getPosition
(
)
;
CtStatement
otherReturnStatement
=
elseBlock
.
getStatement
(
0
)
;
assertEquals
(
otherReturnStatement
.
getPosition
(
)
,
positionElse
)
;
assertEquals
(
"ImplicitBlock.java"
,
positionThen
.
getFile
(
)
.
getName
(
)
)
;
assertEquals
(
8
,
positionElse
.
getLine
(
)
)
;
assertNotEquals
(
returnStatement
,
otherReturnStatement
)
;
}
