@Test
public
void
testLinePositionOkWithOneLineClassCode
(
)
{
final
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
addInputResource
(
new
VirtualFile
(
"public class A { public Object b() { return a < b; }}"
,
"chunk.java"
)
)
;
launcher
.
buildModel
(
)
;
final
List
<
CtElement
>
listOfBadPositionElements
=
launcher
.
getModel
(
)
.
getElements
(
new
TypeFilter
<
>
(
CtElement
.
class
)
)
.
stream
(
)
.
filter
(
elt
->
elt
.
getPosition
(
)
.
isValidPosition
(
)
)
.
collect
(
Collectors
.
toList
(
)
)
;
assertTrue
(
"Some Spoon elements have an invalid line position"
,
listOfBadPositionElements
.
stream
(
)
.
allMatch
(
elt
->
elt
.
getPosition
(
)
.
getLine
(
)
==
1
)
)
;
}
