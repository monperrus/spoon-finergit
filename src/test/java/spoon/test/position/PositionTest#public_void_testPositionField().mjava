@Test
public
void
testPositionField
(
)
throws
Exception
{
final
Factory
build
=
build
(
FooField
.
class
)
;
final
CtType
<
FooField
>
foo
=
build
.
Type
(
)
.
get
(
FooField
.
class
)
;
String
classContent
=
getClassContent
(
foo
)
;
SourcePosition
position1
=
foo
.
getField
(
"field1"
)
.
getPosition
(
)
;
assertEquals
(
5
,
position1
.
getLine
(
)
)
;
assertEquals
(
5
,
position1
.
getEndLine
(
)
)
;
assertEquals
(
68
,
position1
.
getSourceStart
(
)
)
;
assertEquals
(
95
,
position1
.
getSourceEnd
(
)
)
;
assertEquals
(
"public final int field1 = 0;"
,
contentAtPosition
(
classContent
,
position1
)
)
;
SourcePosition
position2
=
foo
.
getField
(
"field2"
)
.
getPosition
(
)
;
assertEquals
(
7
,
position2
.
getLine
(
)
)
;
assertEquals
(
8
,
position2
.
getEndLine
(
)
)
;
assertEquals
(
99
,
position2
.
getSourceStart
(
)
)
;
assertEquals
(
116
,
position2
.
getSourceEnd
(
)
)
;
assertEquals
(
"int field2 =\n"
+
"\t\t\t0;"
,
contentAtPosition
(
classContent
,
position2
)
)
;
}
