@Test
public
void
testPositionTryCatch
(
)
throws
Exception
{
CtType
<
?
>
foo
=
buildClass
(
PositionTry
.
class
)
;
String
classContent
=
getClassContent
(
foo
)
;
List
<
CtCatchVariable
>
elements
=
foo
.
getElements
(
new
TypeFilter
<
>
(
CtCatchVariable
.
class
)
)
;
CtCatchVariable
withoutModifier
=
elements
.
get
(
0
)
;
assertEquals
(
"java.lang.Exception e"
,
contentAtPosition
(
classContent
,
withoutModifier
.
getPosition
(
)
.
getSourceStart
(
)
,
withoutModifier
.
getPosition
(
)
.
getSourceEnd
(
)
)
)
;
assertEquals
(
"e"
,
contentAtPosition
(
classContent
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getNameStart
(
)
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getNameEnd
(
)
)
)
;
assertEquals
(
""
,
contentAtPosition
(
classContent
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getModifierSourceStart
(
)
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getModifierSourceEnd
(
)
)
)
;
CtCatchVariable
withModifier
=
elements
.
get
(
1
)
;
assertEquals
(
"final java.lang.Exception e"
,
contentAtPosition
(
classContent
,
withModifier
.
getPosition
(
)
.
getSourceStart
(
)
,
withModifier
.
getPosition
(
)
.
getSourceEnd
(
)
)
)
;
assertEquals
(
"e"
,
contentAtPosition
(
classContent
,
(
(
DeclarationSourcePosition
)
withModifier
.
getPosition
(
)
)
.
getNameStart
(
)
,
(
(
DeclarationSourcePosition
)
withModifier
.
getPosition
(
)
)
.
getNameEnd
(
)
)
)
;
assertEquals
(
"final"
,
contentAtPosition
(
classContent
,
(
(
DeclarationSourcePosition
)
withModifier
.
getPosition
(
)
)
.
getModifierSourceStart
(
)
,
(
(
DeclarationSourcePosition
)
withModifier
.
getPosition
(
)
)
.
getModifierSourceEnd
(
)
)
)
;
CtCatchVariable
withMultipleCatch
=
elements
.
get
(
2
)
;
assertEquals
(
"NullPointerException | java.lang.ArithmeticException e"
,
contentAtPosition
(
classContent
,
withMultipleCatch
.
getPosition
(
)
.
getSourceStart
(
)
,
withMultipleCatch
.
getPosition
(
)
.
getSourceEnd
(
)
)
)
;
assertEquals
(
"e"
,
contentAtPosition
(
classContent
,
(
(
DeclarationSourcePosition
)
withMultipleCatch
.
getPosition
(
)
)
.
getNameStart
(
)
,
(
(
DeclarationSourcePosition
)
withMultipleCatch
.
getPosition
(
)
)
.
getNameEnd
(
)
)
)
;
assertEquals
(
""
,
contentAtPosition
(
classContent
,
(
(
DeclarationSourcePosition
)
withMultipleCatch
.
getPosition
(
)
)
.
getModifierSourceStart
(
)
,
(
(
DeclarationSourcePosition
)
withMultipleCatch
.
getPosition
(
)
)
.
getModifierSourceEnd
(
)
)
)
;
foo
=
buildClass
(
Comment1
.
class
)
;
classContent
=
getClassContent
(
foo
)
;
elements
=
foo
.
getElements
(
new
TypeFilter
<
>
(
CtCatchVariable
.
class
)
)
;
withoutModifier
=
elements
.
get
(
0
)
;
assertEquals
(
"Exception ex"
,
contentAtPosition
(
classContent
,
withoutModifier
.
getPosition
(
)
.
getSourceStart
(
)
,
withoutModifier
.
getPosition
(
)
.
getSourceEnd
(
)
)
)
;
assertEquals
(
"ex"
,
contentAtPosition
(
classContent
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getNameStart
(
)
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getNameEnd
(
)
)
)
;
assertEquals
(
""
,
contentAtPosition
(
classContent
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getModifierSourceStart
(
)
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getModifierSourceEnd
(
)
)
)
;
foo
=
buildClass
(
VariableReferencesModelTest
.
class
)
;
classContent
=
getClassContent
(
foo
)
;
elements
=
foo
.
getElements
(
new
TypeFilter
<
>
(
CtCatchVariable
.
class
)
)
;
withoutModifier
=
elements
.
get
(
0
)
;
assertEquals
(
"IllegalArgumentException e"
,
contentAtPosition
(
classContent
,
withoutModifier
.
getPosition
(
)
.
getSourceStart
(
)
,
withoutModifier
.
getPosition
(
)
.
getSourceEnd
(
)
)
)
;
assertEquals
(
"e"
,
contentAtPosition
(
classContent
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getNameStart
(
)
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getNameEnd
(
)
)
)
;
assertEquals
(
""
,
contentAtPosition
(
classContent
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getModifierSourceStart
(
)
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getModifierSourceEnd
(
)
)
)
;
withoutModifier
=
elements
.
get
(
1
)
;
assertEquals
(
"Exception /*7*/field"
,
contentAtPosition
(
classContent
,
withoutModifier
.
getPosition
(
)
.
getSourceStart
(
)
,
withoutModifier
.
getPosition
(
)
.
getSourceEnd
(
)
)
)
;
assertEquals
(
"field"
,
contentAtPosition
(
classContent
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getNameStart
(
)
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getNameEnd
(
)
)
)
;
assertEquals
(
""
,
contentAtPosition
(
classContent
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getModifierSourceStart
(
)
,
(
(
DeclarationSourcePosition
)
withoutModifier
.
getPosition
(
)
)
.
getModifierSourceEnd
(
)
)
)
;
}
