@Test
public
void
testSourceFragmentsOfNewArrayList
(
)
throws
Exception
{
final
CtType
<
?
>
type
=
ModelUtils
.
buildClass
(
NewArrayList
.
class
)
;
CtConstructorCall
<
?
>
constCall
=
(
CtConstructorCall
<
?
>
)
type
.
getMethodsByName
(
"m"
)
.
get
(
0
)
.
getBody
(
)
.
getStatements
(
)
.
get
(
0
)
;
ElementSourceFragment
constCallSF
=
constCall
.
getOriginalSourceFragment
(
)
;
List
<
SourceFragment
>
children
=
constCallSF
.
getChildrenFragments
(
)
;
assertEquals
(
6
,
children
.
size
(
)
)
;
assertEquals
(
"new"
,
children
.
get
(
0
)
.
getSourceCode
(
)
)
;
assertEquals
(
" "
,
children
.
get
(
1
)
.
getSourceCode
(
)
)
;
assertEquals
(
"ArrayList<>"
,
children
.
get
(
2
)
.
getSourceCode
(
)
)
;
assertEquals
(
"("
,
children
.
get
(
3
)
.
getSourceCode
(
)
)
;
assertEquals
(
")"
,
children
.
get
(
4
)
.
getSourceCode
(
)
)
;
assertEquals
(
";"
,
children
.
get
(
5
)
.
getSourceCode
(
)
)
;
List
<
SourceFragment
>
children2
=
(
(
ElementSourceFragment
)
children
.
get
(
2
)
)
.
getChildrenFragments
(
)
;
assertEquals
(
3
,
children2
.
size
(
)
)
;
assertEquals
(
"ArrayList"
,
children2
.
get
(
0
)
.
getSourceCode
(
)
)
;
assertEquals
(
"<"
,
children2
.
get
(
1
)
.
getSourceCode
(
)
)
;
assertEquals
(
">"
,
children2
.
get
(
2
)
.
getSourceCode
(
)
)
;
}
