@Test
public
void
testThisConstructorCall2
(
)
throws
Exception
{
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
getEnvironment
(
)
.
setNoClasspath
(
true
)
;
launcher
.
addInputResource
(
"./src/test/resources/noclasspath/ArrayRealVector.java"
)
;
CtModel
model
=
launcher
.
buildModel
(
)
;
Factory
f
=
launcher
.
getFactory
(
)
;
CtClass
<
?
>
type
=
(
CtClass
)
f
.
Class
(
)
.
get
(
"org.apache.commons.math4.linear.ArrayRealVector"
)
;
{
CtConstructor
<
?
>
constr
=
type
.
getConstructors
(
)
.
stream
(
)
.
filter
(
c
->
c
.
getParameters
(
)
.
size
(
)
==
1
&&
"ArrayRealVector"
.
equals
(
c
.
getParameters
(
)
.
get
(
0
)
.
getType
(
)
.
getSimpleName
(
)
)
)
.
findFirst
(
)
.
get
(
)
;
assertEquals
(
"this(v, true)"
,
constr
.
getBody
(
)
.
getStatement
(
0
)
.
toString
(
)
)
;
}
{
String
printed
=
type
.
toString
(
)
;
Pattern
re
=
Pattern
.
compile
(
"public ArrayRealVector\\(org.apache.commons.math4.linear.ArrayRealVector v\\)[^\\{]*\\{\\s*([^;]*)"
)
;
Matcher
m
=
re
.
matcher
(
printed
)
;
assertTrue
(
m
.
find
(
)
)
;
assertEquals
(
"this(v, true)"
,
m
.
group
(
1
)
)
;
}
}
