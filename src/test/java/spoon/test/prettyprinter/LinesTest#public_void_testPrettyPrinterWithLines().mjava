@Test
public
void
testPrettyPrinterWithLines
(
)
throws
Exception
{
for
(
CtType
<
?
>
t
:
factory
.
Type
(
)
.
getAll
(
)
)
{
if
(
t
.
isTopLevel
(
)
)
{
DefaultJavaPrettyPrinter
pp
=
new
DefaultJavaPrettyPrinter
(
factory
.
getEnvironment
(
)
)
;
pp
.
calculate
(
t
.
getPosition
(
)
.
getCompilationUnit
(
)
,
t
.
getPosition
(
)
.
getCompilationUnit
(
)
.
getDeclaredTypes
(
)
)
;
}
}
assertEquals
(
0
,
factory
.
getEnvironment
(
)
.
getWarningCount
(
)
)
;
assertEquals
(
0
,
factory
.
getEnvironment
(
)
.
getErrorCount
(
)
)
;
String
meth
=
factory
.
Type
(
)
.
get
(
"spoon.test.prettyprinter.Validation"
)
.
getMethodsByName
(
"isIdentifier"
)
.
get
(
0
)
.
toString
(
)
;
assertFalse
(
Pattern
.
compile
(
"^\\s"
,
Pattern
.
DOTALL
)
.
asPredicate
(
)
.
test
(
meth
.
toString
(
)
)
)
;
}
