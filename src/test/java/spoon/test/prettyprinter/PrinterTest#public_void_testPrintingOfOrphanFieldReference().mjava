@Test
public
void
testPrintingOfOrphanFieldReference
(
)
throws
Exception
{
CtType
<
?
>
type
=
ModelUtils
.
buildClass
(
MissingVariableDeclaration
.
class
)
;
type
.
getField
(
"testedField"
)
.
delete
(
)
;
try
{
type
.
getMethodsByName
(
"failingMethod"
)
.
get
(
0
)
.
getBody
(
)
.
getStatement
(
0
)
.
toString
(
)
;
fail
(
)
;
}
catch
(
SpoonException
e
)
{
assertTrue
(
e
.
getMessage
(
)
.
indexOf
(
"testedField"
)
>=
0
)
;
assertTrue
(
e
.
getMessage
(
)
.
indexOf
(
"failingMethod"
)
>=
0
)
;
assertTrue
(
e
.
getMessage
(
)
.
indexOf
(
"MissingVariableDeclaration"
)
>=
0
)
;
}
}
