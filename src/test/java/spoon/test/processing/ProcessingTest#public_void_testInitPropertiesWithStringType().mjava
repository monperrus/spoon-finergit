@Test
public
void
testInitPropertiesWithStringType
(
)
{
class
AProcessor
extends
AbstractManualProcessor
{
@Property
String
aString
;
@Property
int
anInt
;
@Property
Object
anObject
;
@Property
int
[
]
arrayInt
;
@Property
List
<
String
>
listString
;
@Property
boolean
[
]
arrayBoolean
;
@Property
Map
<
String
,
Double
>
mapStringDouble
;
@Override
public
void
process
(
)
{
}
}
;
AProcessor
p
=
new
AProcessor
(
)
;
Launcher
launcher
=
new
Launcher
(
)
;
p
.
setFactory
(
launcher
.
getFactory
(
)
)
;
ProcessorProperties
props
=
new
ProcessorPropertiesImpl
(
)
;
props
.
set
(
"aString"
,
"foo"
)
;
props
.
set
(
"anInt"
,
"42"
)
;
props
.
set
(
"anObject"
,
"{}"
)
;
props
.
set
(
"arrayInt"
,
"[42,43]"
)
;
props
.
set
(
"listString"
,
"[\"foo\", \"bar\"]"
)
;
props
.
set
(
"arrayBoolean"
,
"[true]"
)
;
props
.
set
(
"mapStringDouble"
,
"{\"foo\": 10.21, \"bar\": 14.42}"
)
;
ProcessorUtils
.
initProperties
(
p
,
props
)
;
assertEquals
(
"foo"
,
p
.
aString
)
;
assertEquals
(
42
,
p
.
anInt
)
;
assertNotNull
(
p
.
anObject
)
;
assertArrayEquals
(
new
int
[
]
{
42
,
43
}
,
p
.
arrayInt
)
;
assertEquals
(
Arrays
.
asList
(
new
String
[
]
{
"foo"
,
"bar"
}
)
,
p
.
listString
)
;
assertArrayEquals
(
new
boolean
[
]
{
true
}
,
p
.
arrayBoolean
)
;
Map
<
String
,
Double
>
mamap
=
new
HashMap
<
>
(
)
;
mamap
.
put
(
"foo"
,
10.21
)
;
mamap
.
put
(
"bar"
,
14.42
)
;
assertEquals
(
mamap
,
p
.
mapStringDouble
)
;
}
