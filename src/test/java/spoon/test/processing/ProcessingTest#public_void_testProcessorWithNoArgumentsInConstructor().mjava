@Test
public
void
testProcessorWithNoArgumentsInConstructor
(
)
{
Launcher
l
=
new
Launcher
(
)
;
l
.
getEnvironment
(
)
.
setLevel
(
Level
.
ERROR
.
toString
(
)
)
;
l
.
buildModel
(
)
;
try
{
new
JDTBasedSpoonCompiler
(
l
.
getFactory
(
)
)
.
instantiateAndProcess
(
Collections
.
singletonList
(
"spoon.test.processing.ProcessingTest$WrongProcessor"
)
)
;
fail
(
)
;
}
catch
(
SpoonException
e
)
{
assertTrue
(
e
.
getMessage
(
)
.
startsWith
(
"Unable to instantiate processor"
)
)
;
assertTrue
(
e
.
getMessage
(
)
.
endsWith
(
"Your processor should have a constructor with no arguments"
)
)
;
assertTrue
(
e
.
getCause
(
)
instanceof
java
.
lang
.
InstantiationException
)
;
}
}
