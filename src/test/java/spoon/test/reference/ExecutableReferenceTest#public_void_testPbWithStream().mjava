@Test
public
void
testPbWithStream
(
)
{
final
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
addInputResource
(
"./src/test/java/spoon/test/reference/testclasses/Stream.java"
)
;
launcher
.
buildModel
(
)
;
CtClass
klass
=
launcher
.
getFactory
(
)
.
Class
(
)
.
get
(
Stream
.
class
)
;
List
<
CtExecutableReference
>
executableReferenceList
=
klass
.
getElements
(
new
TypeFilter
<
>
(
CtExecutableReference
.
class
)
)
;
CtExecutableReference
lastExecutableReference
=
executableReferenceList
.
get
(
executableReferenceList
.
size
(
)
-
1
)
;
CtExecutable
declaration
=
lastExecutableReference
.
getExecutableDeclaration
(
)
;
assertNotNull
(
declaration
)
;
assertTrue
(
declaration
instanceof
InvisibleArrayConstructorImpl
)
;
String
exepectedString
=
"spoon.test.reference.testclasses.Bar[]::new"
;
assertEquals
(
exepectedString
,
declaration
.
toString
(
)
)
;
}
