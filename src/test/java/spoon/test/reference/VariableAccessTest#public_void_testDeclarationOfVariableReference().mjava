@Test
public
void
testDeclarationOfVariableReference
(
)
throws
Exception
{
final
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
addInputResource
(
"./src/test/resources/noclasspath/Foo2.java"
)
;
launcher
.
getEnvironment
(
)
.
setNoClasspath
(
true
)
;
launcher
.
buildModel
(
)
;
launcher
.
getModel
(
)
.
getElements
(
new
TypeFilter
<
CtVariableReference
>
(
CtVariableReference
.
class
)
{
@Override
public
boolean
matches
(
CtVariableReference
element
)
{
try
{
element
.
clone
(
)
.
getDeclaration
(
)
;
}
catch
(
NullPointerException
e
)
{
fail
(
"Fail with "
+
element
.
getSimpleName
(
)
+
" declared in "
+
element
.
getParent
(
)
.
getShortRepresentation
(
)
)
;
}
return
super
.
matches
(
element
)
;
}
}
)
;
}
