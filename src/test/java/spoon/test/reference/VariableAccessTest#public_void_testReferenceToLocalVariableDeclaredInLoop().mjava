@Test
public
void
testReferenceToLocalVariableDeclaredInLoop
(
)
{
final
class
CtLocalVariableReferenceScanner
extends
CtScanner
{
@Override
public
<
T
>
void
visitCtLocalVariableReference
(
final
CtLocalVariableReference
<
T
>
reference
)
{
assertNotNull
(
reference
.
getDeclaration
(
)
)
;
assertEquals
(
reference
.
getDeclaration
(
)
.
getSimpleName
(
)
,
reference
.
getSimpleName
(
)
)
;
assertEquals
(
reference
.
getDeclaration
(
)
.
getType
(
)
,
reference
.
getType
(
)
)
;
super
.
visitCtLocalVariableReference
(
reference
)
;
}
}
final
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
getEnvironment
(
)
.
setNoClasspath
(
true
)
;
launcher
.
addInputResource
(
"src/test/resources/reference-test/ChangeScanner.java"
)
;
launcher
.
buildModel
(
)
;
new
CtLocalVariableReferenceScanner
(
)
.
scan
(
launcher
.
getModel
(
)
.
getRootPackage
(
)
)
;
}
