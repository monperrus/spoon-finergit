@Test
public
void
testReferences
(
)
throws
Exception
{
final
CtType
<
Tortillas
>
aTortillas
=
buildClass
(
Tortillas
.
class
)
;
final
CtMethod
<
Object
>
make
=
aTortillas
.
getMethod
(
"make"
,
aTortillas
.
getFactory
(
)
.
Type
(
)
.
stringType
(
)
)
;
final
CtLocalVariable
localVar
=
make
.
getBody
(
)
.
getStatement
(
0
)
;
final
CtLocalVariable
localVarCloned
=
localVar
.
clone
(
)
;
final
CtLocalVariableReference
localVarRef
=
localVar
.
getReference
(
)
;
final
CtLocalVariableReference
localVarRefCloned
=
localVarCloned
.
getReference
(
)
;
assertEquals
(
localVarRef
.
getDeclaration
(
)
,
localVar
)
;
assertSame
(
localVarRef
.
getDeclaration
(
)
,
localVar
)
;
assertEquals
(
localVar
.
getReference
(
)
.
getDeclaration
(
)
,
localVar
)
;
assertSame
(
localVar
.
getReference
(
)
.
getDeclaration
(
)
,
localVar
)
;
assertEquals
(
localVarRefCloned
.
getDeclaration
(
)
,
localVarCloned
)
;
assertSame
(
localVarRefCloned
.
getDeclaration
(
)
,
localVarCloned
)
;
assertEquals
(
localVarCloned
.
getReference
(
)
.
getDeclaration
(
)
,
localVarCloned
)
;
assertSame
(
localVarCloned
.
getReference
(
)
.
getDeclaration
(
)
,
localVarCloned
)
;
}
