@Test
public
void
testReferencesInInitExpression
(
)
throws
Exception
{
final
CtType
<
Tortillas
>
aTortillas
=
buildClass
(
Tortillas
.
class
)
;
final
CtMethod
<
Object
>
make
=
aTortillas
.
getMethod
(
"make"
,
aTortillas
.
getFactory
(
)
.
Type
(
)
.
stringType
(
)
)
;
final
CtLocalVariable
localVarNumber
=
make
.
getBody
(
)
.
getStatement
(
1
)
;
List
<
CtLocalVariableReference
<
?
>
>
refs
=
localVarNumber
.
map
(
new
LocalVariableReferenceFunction
(
)
)
.
list
(
)
;
assertEquals
(
1
,
refs
.
size
(
)
)
;
assertSame
(
localVarNumber
,
refs
.
get
(
0
)
.
getParent
(
CtLocalVariable
.
class
)
)
;
}
