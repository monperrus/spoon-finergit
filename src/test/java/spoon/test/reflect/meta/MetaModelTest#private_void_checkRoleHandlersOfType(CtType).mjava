private
void
checkRoleHandlersOfType
(
CtType
iface
)
{
Class
ifaceClass
=
iface
.
getActualClass
(
)
;
List
<
RoleHandler
>
roleHandlersOfIFace
=
new
ArrayList
<
>
(
RoleHandlerHelper
.
getRoleHandlers
(
ifaceClass
)
)
;
Set
<
RoleHandler
>
allRoleHandlers
=
new
HashSet
<
>
(
)
;
RoleHandlerHelper
.
forEachRoleHandler
(
rh
->
allRoleHandlers
.
add
(
rh
)
)
;
for
(
CtRole
role
:
CtRole
.
values
(
)
)
{
RoleHandler
rh
=
RoleHandlerHelper
.
getOptionalRoleHandler
(
ifaceClass
,
role
)
;
if
(
rh
!=
null
)
{
assertTrue
(
"RoleHandler for role "
+
role
+
" is missing for "
+
ifaceClass
,
roleHandlersOfIFace
.
remove
(
rh
)
)
;
assertTrue
(
"RoleHandler "
+
rh
+
" is not accessible by RoleHandlerHelper#forEachRoleHandler()"
,
allRoleHandlers
.
contains
(
rh
)
)
;
}
}
assertTrue
(
"There are unexpected RoleHandlers "
+
roleHandlersOfIFace
+
" for "
+
ifaceClass
,
roleHandlersOfIFace
.
isEmpty
(
)
)
;
}
