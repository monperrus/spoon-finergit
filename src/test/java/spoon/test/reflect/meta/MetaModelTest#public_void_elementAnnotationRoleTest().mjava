@Test
public
void
elementAnnotationRoleTest
(
)
{
Launcher
launcher
=
new
Launcher
(
)
;
Factory
factory
=
launcher
.
getFactory
(
)
;
CtClass
<
?
>
type
=
(
CtClass
)
factory
.
Core
(
)
.
create
(
CtClass
.
class
)
;
CtAnnotation
<
?
>
annotation
=
factory
.
Annotation
(
)
.
annotate
(
type
,
Parameter
.
class
,
"value"
,
"abc"
)
;
List
<
CtAnnotation
<
?
>
>
value
=
type
.
getValueByRole
(
CtRole
.
ANNOTATION
)
;
assertEquals
(
1
,
value
.
size
(
)
)
;
assertSame
(
annotation
,
value
.
get
(
0
)
)
;
try
{
value
.
remove
(
annotation
)
;
fail
(
)
;
}
catch
(
Exception
e
)
{
this
.
getClass
(
)
;
}
type
.
setValueByRole
(
CtRole
.
ANNOTATION
,
Collections
.
emptyList
(
)
)
;
value
=
type
.
getValueByRole
(
CtRole
.
ANNOTATION
)
;
assertEquals
(
0
,
value
.
size
(
)
)
;
type
.
setValueByRole
(
CtRole
.
ANNOTATION
,
Collections
.
singletonList
(
annotation
)
)
;
value
=
type
.
getValueByRole
(
CtRole
.
ANNOTATION
)
;
assertEquals
(
1
,
value
.
size
(
)
)
;
assertSame
(
annotation
,
value
.
get
(
0
)
)
;
try
{
type
.
setValueByRole
(
CtRole
.
ANNOTATION
,
annotation
)
;
fail
(
)
;
}
catch
(
ClassCastException
e
)
{
}
}
