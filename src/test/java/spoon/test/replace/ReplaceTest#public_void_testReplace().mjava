@Test
public
void
testReplace
(
)
throws
Exception
{
SpoonCompiler
comp
=
new
SpoonCompiler
(
)
;
List
<
SpoonFile
>
files
=
new
ArrayList
(
)
;
SpoonFile
file
=
new
FileSystemFile
(
new
File
(
"./src/test/java/spoon/test/replace/Foo.java"
)
)
;
files
.
add
(
file
)
;
Factory
factory
=
new
Factory
(
new
DefaultCoreFactory
(
)
,
new
StandardEnvironment
(
)
)
;
comp
.
compileSrc
(
factory
,
files
)
;
CtClass
foo
=
(
CtClass
)
factory
.
Package
(
)
.
get
(
"spoon.test.replace"
)
.
getType
(
"Foo"
)
;
assertEquals
(
"Foo"
,
foo
.
getSimpleName
(
)
)
;
CtClass
bar
=
(
CtClass
)
factory
.
Package
(
)
.
get
(
"spoon.test.replace"
)
.
getType
(
"Bar"
)
;
assertEquals
(
"Bar"
,
bar
.
getSimpleName
(
)
)
;
CtField
i1
=
foo
.
getField
(
"i"
)
;
CtField
i2
=
bar
.
getField
(
"i"
)
;
assertEquals
(
"int"
,
foo
.
getField
(
"i"
)
.
getType
(
)
.
getSimpleName
(
)
)
;
i1
.
replace
(
i2
)
;
assertSame
(
i2
,
foo
.
getField
(
"i"
)
)
;
assertEquals
(
"float"
,
foo
.
getField
(
"i"
)
.
getType
(
)
.
getSimpleName
(
)
)
;
i2
.
replace
(
i1
)
;
assertSame
(
i1
,
foo
.
getField
(
"i"
)
)
;
assertEquals
(
"int"
,
foo
.
getField
(
"i"
)
.
getType
(
)
.
getSimpleName
(
)
)
;
}
