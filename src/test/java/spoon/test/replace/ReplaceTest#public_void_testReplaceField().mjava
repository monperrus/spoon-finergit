@Test
public
void
testReplaceField
(
)
{
CtClass
<
?
>
sample
=
factory
.
Package
(
)
.
get
(
"spoon.test.replace.testclasses"
)
.
getType
(
"Foo"
)
;
Assert
.
assertEquals
(
factory
.
Type
(
)
.
createReference
(
int
.
class
)
,
sample
.
getField
(
"i"
)
.
getType
(
)
)
;
CtField
replacement
=
factory
.
Core
(
)
.
createField
(
)
;
replacement
.
setSimpleName
(
"i"
)
;
replacement
.
setType
(
factory
.
Type
(
)
.
createReference
(
double
.
class
)
)
;
sample
.
getField
(
"i"
)
.
replace
(
replacement
)
;
Assert
.
assertEquals
(
factory
.
Type
(
)
.
createReference
(
double
.
class
)
,
sample
.
getField
(
"i"
)
.
getType
(
)
)
;
replacement
=
factory
.
Core
(
)
.
createField
(
)
;
replacement
.
setSimpleName
(
"j"
)
;
replacement
.
setType
(
factory
.
Type
(
)
.
createReference
(
double
.
class
)
)
;
sample
.
getField
(
"i"
)
.
replace
(
replacement
)
;
Assert
.
assertNull
(
sample
.
getField
(
"i"
)
)
;
Assert
.
assertNotNull
(
sample
.
getField
(
"j"
)
)
;
Assert
.
assertEquals
(
factory
.
Type
(
)
.
createReference
(
double
.
class
)
,
sample
.
getField
(
"j"
)
.
getType
(
)
)
;
}
