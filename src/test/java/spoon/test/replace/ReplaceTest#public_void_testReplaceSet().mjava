@Test
public
void
testReplaceSet
(
)
throws
Exception
{
CtClass
<
?
>
foo
=
factory
.
Package
(
)
.
get
(
"spoon.test.replace.testclasses"
)
.
getType
(
"Foo"
)
;
assertEquals
(
"Foo"
,
foo
.
getSimpleName
(
)
)
;
CtClass
<
?
>
bar
=
factory
.
Package
(
)
.
get
(
"spoon.test.replace.testclasses"
)
.
getType
(
"Bar"
)
;
assertEquals
(
"Bar"
,
bar
.
getSimpleName
(
)
)
;
CtField
<
Number
>
i1
=
(
CtField
<
Number
>
)
foo
.
getField
(
"i"
)
;
CtField
<
Number
>
i2
=
(
CtField
<
Number
>
)
bar
.
getField
(
"i"
)
;
assertEquals
(
"int"
,
foo
.
getField
(
"i"
)
.
getType
(
)
.
getSimpleName
(
)
)
;
i1
.
replace
(
i2
)
;
assertSame
(
i2
,
foo
.
getField
(
"i"
)
)
;
assertEquals
(
"float"
,
foo
.
getField
(
"i"
)
.
getType
(
)
.
getSimpleName
(
)
)
;
assertEquals
(
foo
,
i2
.
getParent
(
)
)
;
i2
.
replace
(
i1
)
;
assertSame
(
i1
,
foo
.
getField
(
"i"
)
)
;
assertEquals
(
"int"
,
foo
.
getField
(
"i"
)
.
getType
(
)
.
getSimpleName
(
)
)
;
assertEquals
(
foo
,
i1
.
getParent
(
)
)
;
}
