@Test
public
void
testSerialCtStatement
(
)
throws
Exception
{
Factory
factory
=
new
FactoryImpl
(
new
DefaultCoreFactory
(
)
,
new
StandardEnvironment
(
)
)
;
CtStatement
sta2
=
(
factory
)
.
Code
(
)
.
createCodeSnippetStatement
(
"String hello =\"t1\"; System.out.println(hello)"
)
.
compile
(
)
;
byte
[
]
ser
=
ByteSerialization
.
serialize
(
sta2
)
;
CtStatement
deserializedSta2
=
(
CtStatement
)
ByteSerialization
.
deserialize
(
ser
)
;
String
sigBef
=
sta2
.
getShortRepresentation
(
)
;
String
sigAf
=
deserializedSta2
.
getShortRepresentation
(
)
;
CtType
<
?
>
typeBef
=
sta2
.
getParent
(
CtType
.
class
)
;
assertNull
(
typeBef
)
;
assertEquals
(
sigBef
,
sigAf
)
;
deserializedSta2
.
setFactory
(
factory
)
;
String
toSBef
=
sta2
.
toString
(
)
;
String
toSgAf
=
deserializedSta2
.
toString
(
)
;
assertEquals
(
toSBef
,
toSgAf
)
;
CtType
<
?
>
typeDes
=
deserializedSta2
.
getParent
(
CtType
.
class
)
;
assertNull
(
typeDes
)
;
assertFalse
(
deserializedSta2
.
isParentInitialized
(
)
)
;
}
