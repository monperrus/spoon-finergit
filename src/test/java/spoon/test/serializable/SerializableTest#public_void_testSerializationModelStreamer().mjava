@Test
public
void
testSerializationModelStreamer
(
)
throws
Exception
{
Factory
factory
=
build
(
"spoon.test.serializable"
,
"Dummy"
)
.
getFactory
(
)
;
ByteArrayOutputStream
outstr
=
new
ByteArrayOutputStream
(
)
;
new
SerializationModelStreamer
(
)
.
save
(
factory
,
outstr
)
;
Factory
loadedFactory
=
new
SerializationModelStreamer
(
)
.
load
(
new
ByteArrayInputStream
(
outstr
.
toByteArray
(
)
)
)
;
assertFalse
(
factory
.
Type
(
)
.
getAll
(
)
.
isEmpty
(
)
)
;
assertFalse
(
loadedFactory
.
Type
(
)
.
getAll
(
)
.
isEmpty
(
)
)
;
assertEquals
(
factory
.
getModel
(
)
.
getRootPackage
(
)
,
loadedFactory
.
getModel
(
)
.
getRootPackage
(
)
)
;
}
