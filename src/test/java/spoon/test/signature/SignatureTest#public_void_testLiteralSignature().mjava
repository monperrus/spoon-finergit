@Test
public
void
testLiteralSignature
(
)
{
Factory
factory
=
new
FactoryImpl
(
new
DefaultCoreFactory
(
)
,
new
StandardEnvironment
(
)
)
;
String
stConstant
=
"\"hello\""
;
CtStatement
sta1
=
(
factory
)
.
Code
(
)
.
createCodeSnippetStatement
(
"System.out.println("
+
stConstant
+
")"
)
.
compile
(
)
;
CtStatement
sta2
=
(
factory
)
.
Code
(
)
.
createCodeSnippetStatement
(
"String hello =\"t1\"; System.out.println(hello)"
)
.
compile
(
)
;
CtStatement
sta2bis
=
(
(
CtBlock
<
?
>
)
sta2
.
getParent
(
)
)
.
getStatement
(
1
)
;
String
signature1
=
sta1
.
getSignature
(
)
;
String
signature2
=
sta2bis
.
getSignature
(
)
;
assertFalse
(
signature1
.
equals
(
signature2
)
)
;
assertFalse
(
sta1
.
equals
(
sta2bis
)
)
;
String
signatureParameterWithQuotes
=
(
(
CtInvocation
<
?
>
)
sta1
)
.
getArguments
(
)
.
get
(
0
)
.
getSignature
(
)
;
assertEquals
(
stConstant
,
signatureParameterWithQuotes
)
;
CtStatement
stb1
=
(
factory
)
.
Code
(
)
.
createCodeSnippetStatement
(
"Integer.toBinaryString(20)"
)
.
compile
(
)
;
String
signatureParameterWithoutQuotes
=
(
(
CtInvocation
<
?
>
)
stb1
)
.
getArguments
(
)
.
get
(
0
)
.
getSignature
(
)
;
assertEquals
(
"20"
,
signatureParameterWithoutQuotes
)
;
}
