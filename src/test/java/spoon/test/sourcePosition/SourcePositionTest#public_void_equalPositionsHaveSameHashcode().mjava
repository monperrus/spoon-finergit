@Test
public
void
equalPositionsHaveSameHashcode
(
)
throws
Exception
{
String
packageName
=
"spoon.test.testclasses"
;
String
sampleClassName
=
"SampleClass"
;
String
qualifiedName
=
packageName
+
"."
+
sampleClassName
;
Filter
<
CtMethod
<
?
>
>
methodFilter
=
new
TypeFilter
<
CtMethod
<
?
>
>
(
CtMethod
.
class
)
;
Factory
aFactory
=
factoryFor
(
packageName
,
sampleClassName
)
;
List
<
CtMethod
<
?
>
>
methods
=
aFactory
.
Class
(
)
.
get
(
qualifiedName
)
.
getElements
(
methodFilter
)
;
Factory
newInstanceOfSameFactory
=
factoryFor
(
packageName
,
sampleClassName
)
;
List
<
CtMethod
<
?
>
>
newInstanceOfSameMethods
=
newInstanceOfSameFactory
.
Class
(
)
.
get
(
qualifiedName
)
.
getElements
(
methodFilter
)
;
assertEquals
(
methods
.
size
(
)
,
newInstanceOfSameMethods
.
size
(
)
)
;
for
(
int
i
=
0
;
i
<
methods
.
size
(
)
;
i
=
1
)
{
SourcePosition
aPosition
=
methods
.
get
(
i
)
.
getPosition
(
)
;
SourcePosition
newInstanceOfSamePosition
=
newInstanceOfSameMethods
.
get
(
i
)
.
getPosition
(
)
;
assertTrue
(
aPosition
.
equals
(
newInstanceOfSamePosition
)
)
;
assertEquals
(
aPosition
.
hashCode
(
)
,
newInstanceOfSamePosition
.
hashCode
(
)
)
;
}
}
