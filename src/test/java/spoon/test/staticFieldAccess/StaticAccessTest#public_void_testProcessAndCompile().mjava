@Test
public
void
testProcessAndCompile
(
)
throws
Exception
{
compiler
.
process
(
Arrays
.
asList
(
InsertBlockProcessor
.
class
.
getName
(
)
)
)
;
File
tmpdir
=
new
File
(
"test_tmp"
)
;
tmpdir
.
mkdirs
(
)
;
compiler
.
setDestinationDirectory
(
tmpdir
)
;
compiler
.
generateProcessedSourceFiles
(
OutputType
.
COMPILATION_UNITS
)
;
spoon
=
new
Launcher
(
)
;
compiler
=
spoon
.
createCompiler
(
SpoonResourceHelper
.
resources
(
tmpdir
.
getAbsolutePath
(
)
)
)
;
assertTrue
(
compiler
.
build
(
)
)
;
}
