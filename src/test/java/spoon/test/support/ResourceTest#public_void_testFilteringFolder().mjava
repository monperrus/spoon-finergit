public
void
testFilteringFolder
(
)
throws
Exception
{
SpoonModelBuilder
mb
=
new
Launcher
(
)
.
getModelBuilder
(
)
;
FilteringFolder
resources
=
new
FilteringFolder
(
)
;
resources
.
addFolder
(
new
FileSystemFolder
(
"src/test/java/spoon/test/visibility/"
)
)
;
mb
.
addInputSource
(
resources
)
;
mb
.
build
(
)
;
int
nbAll
=
mb
.
getFactory
(
)
.
getModel
(
)
.
getAllTypes
(
)
.
size
(
)
;
assertEquals
(
12
,
nbAll
)
;
SpoonModelBuilder
mb2
=
new
Launcher
(
)
.
getModelBuilder
(
)
;
FilteringFolder
resources2
=
new
FilteringFolder
(
)
;
resources2
.
addFolder
(
new
FileSystemFolder
(
"src/test/java/spoon/test/visibility/packageprotected/"
)
)
;
mb2
.
addInputSource
(
resources2
)
;
mb2
.
build
(
)
;
int
nbPackageProtected
=
mb2
.
getFactory
(
)
.
getModel
(
)
.
getAllTypes
(
)
.
size
(
)
;
assertEquals
(
2
,
nbPackageProtected
)
;
SpoonModelBuilder
mb3
=
new
Launcher
(
)
.
getModelBuilder
(
)
;
FilteringFolder
resources3
=
new
FilteringFolder
(
)
;
resources3
.
addFolder
(
new
FileSystemFolder
(
"src/test/java/spoon/test/visibility/"
)
)
;
resources3
.
removeAllThatMatch
(
".*packageprotected.*"
)
;
mb3
.
addInputSource
(
resources3
)
;
mb3
.
build
(
)
;
assertEquals
(
nbAll
-
nbPackageProtected
,
mb3
.
getFactory
(
)
.
getModel
(
)
.
getAllTypes
(
)
.
size
(
)
)
;
}
