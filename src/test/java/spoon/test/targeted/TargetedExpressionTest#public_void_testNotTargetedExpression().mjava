@Test
public
void
testNotTargetedExpression
(
)
throws
Exception
{
Factory
factory
=
build
(
Foo
.
class
,
Bar
.
class
,
SuperClass
.
class
)
;
CtClass
<
Object
>
fooClass
=
factory
.
Class
(
)
.
get
(
Foo
.
class
)
;
CtField
<
?
>
iField
=
fooClass
.
getField
(
"i"
)
;
CtFieldAccess
<
?
>
fieldAccess
=
factory
.
Core
(
)
.
createFieldRead
(
)
;
fieldAccess
.
setVariable
(
(
CtFieldReference
)
iField
.
getReference
(
)
)
;
fieldAccess
.
setTarget
(
factory
.
Code
(
)
.
createThisAccess
(
fooClass
.
getReference
(
)
)
)
;
assertEquals
(
"spoon.test.targeted.testclasses.Foo.this.i"
,
fieldAccess
.
toString
(
)
)
;
fieldAccess
.
setTarget
(
null
)
;
assertEquals
(
"i"
,
fieldAccess
.
toString
(
)
)
;
}
