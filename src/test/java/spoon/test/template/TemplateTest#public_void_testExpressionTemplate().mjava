@Test
public
void
testExpressionTemplate
(
)
{
Launcher
spoon
=
new
Launcher
(
)
;
spoon
.
addTemplateResource
(
new
FileSystemFile
(
"./src/test/java/spoon/test/template/testclasses/AnExpressionTemplate.java"
)
)
;
spoon
.
buildModel
(
)
;
Factory
factory
=
spoon
.
getFactory
(
)
;
CtClass
<
?
ExpressionTemplate
<
?
>
>
templateClass
=
factory
.
Class
(
)
.
get
(
AnExpressionTemplate
.
class
)
;
assertEquals
(
"new java.lang.String(exp.S())"
,
ExpressionTemplate
.
getExpression
(
templateClass
)
.
toString
(
)
)
;
CtClass
<
?
>
resultKlass
=
factory
.
Class
(
)
.
create
(
"Result"
)
;
CtExpression
result
=
new
AnExpressionTemplate
(
factory
.
createCodeSnippetExpression
(
"\"Spoon is cool!\""
)
)
.
apply
(
resultKlass
)
;
assertFalse
(
result
.
isParentInitialized
(
)
)
;
assertEquals
(
"new java.lang.String(\"Spoon is cool!\")"
,
result
.
toString
(
)
)
;
}
