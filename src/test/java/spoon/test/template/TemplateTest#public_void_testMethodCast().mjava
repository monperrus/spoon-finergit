@Test
public
void
testMethodCast
(
)
throws
Exception
{
Launcher
spoon
=
new
Launcher
(
)
;
Factory
factory
=
spoon
.
getFactory
(
)
;
spoon
.
createCompiler
(
factory
,
SpoonResourceHelper
.
resources
(
"./src/test/java/spoon/test/template/testclasses/Flow.java"
)
,
SpoonResourceHelper
.
resources
(
"./src/test/java/spoon/test/template/testclasses/FlowMatcher.java"
)
)
.
build
(
)
;
CtClass
<
?
>
templateKlass
=
factory
.
Class
(
)
.
get
(
FlowMatcher
.
class
)
;
CtClass
<
?
>
klass
=
factory
.
Class
(
)
.
get
(
Flow
.
class
)
;
CtMethod
<
?
>
method
=
(
CtMethod
<
?
>
)
templateKlass
.
getElements
(
new
NamedElementFilter
(
CtMethod
.
class
,
"subFlowMatcher"
)
)
.
get
(
0
)
;
CtElement
templateRoot
=
method
.
getBody
(
)
.
getStatement
(
0
)
;
TemplateMatcher
myMatcher
=
new
TemplateMatcher
(
templateRoot
)
;
assertEquals
(
2
,
myMatcher
.
find
(
klass
)
.
size
(
)
)
;
}
