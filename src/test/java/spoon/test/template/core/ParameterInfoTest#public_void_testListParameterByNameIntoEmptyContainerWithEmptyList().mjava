@Test
public
void
testListParameterByNameIntoEmptyContainerWithEmptyList
(
)
{
Consumer
<
ParameterInfo
>
check
=
(
namedParam
)
->
{
ImmutableMap
empty
=
new
ImmutableMapImpl
(
)
.
putValue
(
"year"
,
Collections
.
emptyList
(
)
)
;
ImmutableMap
val
=
namedParam
.
addValueAs
(
empty
,
2018
)
;
ImmutableMap
val2
=
namedParam
.
addValueAs
(
val
,
2018
)
;
assertSame
(
val2
,
namedParam
.
addValueAs
(
val2
,
null
)
)
;
assertEquals
(
map
(
)
.
put
(
"year"
,
Collections
.
emptyList
(
)
)
,
empty
.
asMap
(
)
)
;
assertNotNull
(
val
)
;
assertEquals
(
map
(
)
.
put
(
"year"
,
Arrays
.
asList
(
2018
)
)
,
val
.
asMap
(
)
)
;
assertNotNull
(
val2
)
;
assertEquals
(
map
(
)
.
put
(
"year"
,
Arrays
.
asList
(
2018
,
2018
)
)
,
val2
.
asMap
(
)
)
;
}
;
check
.
accept
(
new
MapParameterInfo
(
"year"
)
.
setContainerKind
(
ContainerKind
.
LIST
)
)
;
check
.
accept
(
new
MapParameterInfo
(
"year"
)
)
;
check
.
accept
(
new
ListParameterInfo
(
new
MapParameterInfo
(
"year"
)
)
)
;
check
.
accept
(
new
ListParameterInfo
(
new
MapParameterInfo
(
"year"
)
.
setContainerKind
(
ContainerKind
.
LIST
)
)
)
;
}
