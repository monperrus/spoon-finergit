@Test
public
void
testRethrowingExceptionsJava7
(
)
throws
Exception
{
CtClass
<
?
>
clazz
=
build
(
"spoon.test.trycatch.testclasses"
,
"RethrowingClass"
)
;
CtMethod
<
?
>
method
=
(
CtMethod
<
?
>
)
clazz
.
getMethods
(
)
.
toArray
(
)
[
0
]
;
Set
<
CtTypeReference
<
?
Throwable
>
>
thrownTypes
=
method
.
getThrownTypes
(
)
;
assertEquals
(
2
,
thrownTypes
.
size
(
)
)
;
CtTry
ctTry
=
clazz
.
getElements
(
new
TypeFilter
<
>
(
CtTry
.
class
)
)
.
get
(
0
)
;
Class
<
?
CtCatchVariableReference
>
exceptionClass
=
ctTry
.
getCatchers
(
)
.
get
(
0
)
.
getParameter
(
)
.
getReference
(
)
.
getClass
(
)
;
for
(
CtTypeReference
<
?
Throwable
>
thrownType
:
thrownTypes
)
{
assertNotEquals
(
thrownType
.
getClass
(
)
,
exceptionClass
)
;
}
}
