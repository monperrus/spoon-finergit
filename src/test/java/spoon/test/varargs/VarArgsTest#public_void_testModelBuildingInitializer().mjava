@Test
public
void
testModelBuildingInitializer
(
)
throws
Exception
{
CtClass
<
Main
>
type
=
build
(
"spoon.test.varargs.testclasses"
,
"VarArgsSample"
)
;
assertEquals
(
"VarArgsSample"
,
type
.
getSimpleName
(
)
)
;
CtMethod
<
?
>
m
=
type
.
getMethodsByName
(
"foo"
)
.
get
(
0
)
;
CtParameter
<
?
>
param0
=
m
.
getParameters
(
)
.
get
(
0
)
;
assertFalse
(
param0
.
isVarArgs
(
)
)
;
CtParameter
<
?
>
param1
=
m
.
getParameters
(
)
.
get
(
1
)
;
assertTrue
(
param1
.
isVarArgs
(
)
)
;
assertEquals
(
"java.lang.String[]"
,
param1
.
getType
(
)
.
toString
(
)
)
;
assertEquals
(
"String[]"
,
param1
.
getType
(
)
.
getSimpleName
(
)
)
;
assertEquals
(
"java.lang.String[]"
,
param1
.
getType
(
)
.
getQualifiedName
(
)
)
;
assertEquals
(
"java.lang.String"
,
(
(
CtArrayTypeReference
<
?
>
)
param1
.
getType
(
)
)
.
getComponentType
(
)
.
toString
(
)
)
;
assertEquals
(
"void foo(int arg0, java.lang.String... args) {"
+
DefaultJavaPrettyPrinter
.
LINE_SEPARATOR
+
"}"
,
m
.
toString
(
)
)
;
}
