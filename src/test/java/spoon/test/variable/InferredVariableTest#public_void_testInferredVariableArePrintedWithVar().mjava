@Test
public
void
testInferredVariableArePrintedWithVar
(
)
throws
IOException
{
Launcher
launcher
=
new
Launcher
(
)
;
launcher
.
getEnvironment
(
)
.
setComplianceLevel
(
10
)
;
launcher
.
addInputResource
(
"./src/test/resources/spoon/test/var/Main.java"
)
;
File
outputDir
=
Files
.
createTempDir
(
)
;
launcher
.
setSourceOutputDirectory
(
outputDir
)
;
launcher
.
run
(
)
;
File
outputFile
=
new
File
(
outputDir
,
"fr/inria/sandbox/Main.java"
)
;
assertTrue
(
outputFile
.
exists
(
)
)
;
String
fileContent
=
StringUtils
.
join
(
Files
.
readLines
(
outputFile
,
Charset
.
defaultCharset
(
)
)
)
;
assertTrue
(
fileContent
.
contains
(
"var mySubstring = \"bla\";"
)
)
;
assertTrue
(
fileContent
.
contains
(
"var myFile = new java.io.FileReader(new java.io.File(\"/tmp/myfile\")"
)
)
;
assertTrue
(
fileContent
.
contains
(
"var myboolean = true;"
)
)
;
assertTrue
(
fileContent
.
contains
(
"for (var i = 0;"
)
)
;
}
