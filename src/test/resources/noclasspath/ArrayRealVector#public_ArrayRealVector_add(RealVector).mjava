/** 
 * {@inheritDoc} 
 */
@Override
public
ArrayRealVector
add
(
RealVector
v
)
throws
DimensionMismatchException
{
if
(
v
instanceof
ArrayRealVector
)
{
final
double
[
]
vData
=
(
(
ArrayRealVector
)
v
)
.
data
;
final
int
dim
=
vData
.
length
;
checkVectorDimensions
(
dim
)
;
ArrayRealVector
result
=
new
ArrayRealVector
(
dim
)
;
double
[
]
resultData
=
result
.
data
;
for
(
int
i
=
0
;
i
<
dim
;
i
++
)
{
resultData
[
i
]
=
data
[
i
]
+
vData
[
i
]
;
}
return
result
;
}
else
{
checkVectorDimensions
(
v
)
;
double
[
]
out
=
data
.
clone
(
)
;
Iterator
<
Entry
>
it
=
v
.
iterator
(
)
;
while
(
it
.
hasNext
(
)
)
{
final
Entry
e
=
it
.
next
(
)
;
out
[
e
.
getIndex
(
)
]
=
e
.
getValue
(
)
;
}
return
new
ArrayRealVector
(
out
,
false
)
;
}
}
