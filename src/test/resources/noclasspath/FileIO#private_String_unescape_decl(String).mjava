/** 
 * Converts the declaration record versoin of a name into its correct version.  In the declaration record, blanks are encoded as \_ and backslashes as \\.
 */
private
static
String
unescape_decl
(
String
orig
)
{
StringBuilder
sb
=
new
StringBuilder
(
orig
.
length
(
)
)
;
int
post_esc
=
0
;
int
this_esc
=
orig
.
indexOf
(
'\\'
)
;
while
(
this_esc
!=
-
1
)
{
if
(
this_esc
==
orig
.
length
(
)
-
1
)
{
sb
.
append
(
orig
.
substring
(
post_esc
,
this_esc
+
1
)
)
;
post_esc
=
this_esc
+
1
;
break
;
}
switch
(
orig
.
charAt
(
this_esc
+
1
)
)
{
case
'n'
:
sb
.
append
(
orig
.
substring
(
post_esc
,
this_esc
)
)
;
sb
.
append
(
'\n'
)
;
post_esc
=
this_esc
+
2
;
break
;
case
'r'
:
sb
.
append
(
orig
.
substring
(
post_esc
,
this_esc
)
)
;
sb
.
append
(
'\r'
)
;
post_esc
=
this_esc
+
2
;
break
;
case
'_'
:
sb
.
append
(
orig
.
substring
(
post_esc
,
this_esc
)
)
;
sb
.
append
(
' '
)
;
post_esc
=
this_esc
+
2
;
break
;
case
'\\'
:
sb
.
append
(
orig
.
substring
(
post_esc
,
this_esc
+
1
)
)
;
post_esc
=
this_esc
+
2
;
break
;
default
:
sb
.
append
(
orig
.
substring
(
post_esc
,
this_esc
)
)
;
post_esc
=
this_esc
+
1
;
break
;
}
this_esc
=
orig
.
indexOf
(
'\\'
,
post_esc
)
;
}
if
(
post_esc
==
0
)
return
orig
;
sb
.
append
(
orig
.
substring
(
post_esc
)
)
;
return
sb
.
toString
(
)
;
}
