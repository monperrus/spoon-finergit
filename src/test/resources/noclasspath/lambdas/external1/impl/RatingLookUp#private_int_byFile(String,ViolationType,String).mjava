private
int
byFile
(
String
userId
,
ViolationType
type
,
String
file
)
{
List
<
Integer
>
list
=
entityManager
.
createQuery
(
byFiles
,
Integer
.
class
)
.
setParameter
(
"userId"
,
userId
)
.
setParameter
(
"type"
,
type
.
toString
(
)
)
.
setParameter
(
"file"
,
file
)
.
setMaxResults
(
1
)
.
getResultList
(
)
;
return
list
.
isEmpty
(
)
?
DEFAULT_RATING
:
list
.
get
(
0
)
;
}
