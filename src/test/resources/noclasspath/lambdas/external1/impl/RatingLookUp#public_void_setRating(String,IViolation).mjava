@Override
@Transactional(readOnly=true)
public
void
setRating
(
String
userId
,
final
IViolation
violation
)
{
ViolationType
type
=
violation
.
getViolationType
(
)
;
Long
id
=
violation
.
getId
(
)
;
int
rating
=
byId
(
userId
,
type
,
id
)
;
if
(
rating
==
ERROR_VALUE
)
{
rating
=
byFiles
(
userId
,
type
,
violation
.
getLocations
(
)
)
;
}
violation
.
setRating
(
rating
)
;
}
